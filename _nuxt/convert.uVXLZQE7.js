import{X as Te,r as Ee,o as Be,E as N,aj as Ge,k as Ve,ad as We,ae as ve,d as Me,ag as He,ah as Oe,ai as et,M as tt,a0 as nt,aI as Ke,ak as Ce,b as P,c as ue,e as Je,a9 as Qe,ab as Le,n as Ie,aJ as at,a3 as Ze,aK as rt,F as De,a7 as $e,t as Ne,g as ze,f as Se,aL as Ae,l as it,aD as st,aC as lt,a8 as Fe,w as Ue,aA as we,aB as qe,aM as ot,aN as ut,aG as dt}from"./entry.IxbtlQ9Q.js";import{c as ct,g as ft}from"./_commonjsHelpers.5-cIlDoe.js";const Xe={wrapper:"relative",base:"relative block w-full disabled:cursor-not-allowed disabled:opacity-75 focus:outline-none border-0",form:"form-input",rounded:"rounded-md",placeholder:"placeholder-gray-400 dark:placeholder-gray-500",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base"},gap:{"2xs":"gap-x-1",xs:"gap-x-1.5",sm:"gap-x-1.5",md:"gap-x-2",lg:"gap-x-2.5",xl:"gap-x-2.5"},padding:{"2xs":"px-2 py-1",xs:"px-2.5 py-1.5",sm:"px-2.5 py-1.5",md:"px-3 py-2",lg:"px-3.5 py-2.5",xl:"px-3.5 py-2.5"},leading:{padding:{"2xs":"ps-7",xs:"ps-8",sm:"ps-9",md:"ps-10",lg:"ps-11",xl:"ps-12"}},trailing:{padding:{"2xs":"pe-7",xs:"pe-8",sm:"pe-9",md:"pe-10",lg:"pe-11",xl:"pe-12"}},color:{white:{outline:"shadow-sm bg-white dark:bg-gray-900 text-gray-900 dark:text-white ring-1 ring-inset ring-gray-300 dark:ring-gray-700 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"},gray:{outline:"shadow-sm bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white ring-1 ring-inset ring-gray-300 dark:ring-gray-700 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"}},variant:{outline:"shadow-sm bg-transparent text-gray-900 dark:text-white ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 focus:ring-2 focus:ring-{color}-500 dark:focus:ring-{color}-400",none:"bg-transparent focus:ring-0 focus:shadow-none"},icon:{base:"flex-shrink-0 text-gray-400 dark:text-gray-500",color:"text-{color}-500 dark:text-{color}-400",loading:"animate-spin",size:{"2xs":"h-4 w-4",xs:"h-4 w-4",sm:"h-5 w-5",md:"h-5 w-5",lg:"h-5 w-5",xl:"h-6 w-6"},leading:{wrapper:"absolute inset-y-0 start-0 flex items-center",pointer:"pointer-events-none",padding:{"2xs":"ps-2",xs:"ps-2.5",sm:"ps-2.5",md:"ps-3",lg:"ps-3.5",xl:"ps-3.5"}},trailing:{wrapper:"absolute inset-y-0 end-0 flex items-center",pointer:"pointer-events-none",padding:{"2xs":"pe-2",xs:"pe-2.5",sm:"pe-2.5",md:"pe-3",lg:"pe-3.5",xl:"pe-3.5"}}},default:{size:"sm",color:"white",variant:"outline",loadingIcon:"i-heroicons-arrow-path-20-solid"}},ht={...Xe,form:"form-textarea",default:{size:"sm",color:"white",variant:"outline"}},gt={...Xe,form:"form-select",placeholder:"text-gray-900 dark:text-white",default:{size:"sm",color:"white",variant:"outline",loadingIcon:"i-heroicons-arrow-path-20-solid",trailingIcon:"i-heroicons-chevron-down-20-solid"}};let pt=0;function mt(){return`nuid-${pt++}`}const Ye=(t,g)=>{const z=Te("form-events",void 0),r=Te("form-group",void 0),L=Te("form-inputs",void 0),K=Ee(t==null?void 0:t.id);Be(()=>{K.value=(t==null?void 0:t.legend)===null||t.legend?void 0:(t==null?void 0:t.id)??mt(),r&&(r.inputId.value=K.value,L&&(L.value[r.name.value]=K))});const A=Ee(!1);function y(_,b){z&&z.emit({type:_,path:b})}function d(){y("blur",r==null?void 0:r.name.value),A.value=!0}function p(){y("change",r==null?void 0:r.name.value)}const m=Ge(()=>{(A.value||r!=null&&r.eagerValidation.value)&&y("input",r==null?void 0:r.name.value)},300);return{inputId:K,name:N(()=>(t==null?void 0:t.name)??(r==null?void 0:r.name.value)),size:N(()=>{var b;const _=g.size[r==null?void 0:r.size.value]?r==null?void 0:r.size.value:null;return(t==null?void 0:t.size)??_??((b=g==null?void 0:g.default)==null?void 0:b.size)}),color:N(()=>{var _;return(_=r==null?void 0:r.error)!=null&&_.value?"red":t==null?void 0:t.color}),emitFormBlur:d,emitFormInput:m,emitFormChange:p}},me=We(ve.ui.strategy,ve.ui.textarea,ht),vt=Me({inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rows:{type:Number,default:3},autoresize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},resize:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(t){return Object.keys(me.size).includes(t)}},color:{type:String,default:()=>me.default.color,validator(t){return[...ve.ui.colors,...Object.keys(me.color)].includes(t)}},variant:{type:String,default:()=>me.default.variant,validator(t){return[...Object.keys(me.variant),...Object.values(me.color).flatMap(g=>Object.keys(g))].includes(t)}},textareaClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur"],setup(t,{emit:g}){const{ui:z,attrs:r}=He("textarea",Oe(t,"ui"),me,Oe(t,"class")),{emitFormBlur:L,emitFormInput:K,inputId:A,color:y,size:d,name:p}=Ye(t,me),m=Ee(et({},t.modelModifiers,{trim:!1,lazy:!1,number:!1})),_=Ee(null),b=()=>{var k;t.autofocus&&((k=_.value)==null||k.focus())},V=()=>{if(t.autoresize){if(!_.value)return;_.value.rows=t.rows;const k=window.getComputedStyle(_.value),G=parseInt(k.paddingTop),se=parseInt(k.paddingBottom),X=G+se,v=parseInt(k.lineHeight),{scrollHeight:n}=_.value,e=(n-X)/v;e>t.rows&&(_.value.rows=e)}},W=k=>{m.value.trim&&(k=k.trim()),m.value.number&&(k=at(k)),g("update:modelValue",k),K()},M=k=>{V(),m.value.lazy||W(k.target.value)},Y=k=>{const G=k.target.value;m.value.lazy&&W(G),m.value.trim&&(k.target.value=G.trim())},fe=k=>{g("blur",k),L()};Be(()=>{setTimeout(()=>{b()},t.autofocusDelay)}),tt(()=>t.modelValue,()=>{nt(V)}),Be(()=>{setTimeout(()=>{b(),V()},100)});const be=N(()=>{var G,se;const k=((se=(G=z.value.color)==null?void 0:G[y.value])==null?void 0:se[t.variant])||z.value.variant[t.variant];return Ke(Ce(z.value.base,z.value.form,z.value.rounded,z.value.placeholder,z.value.size[d.value],t.padded?z.value.padding[d.value]:"p-0",k==null?void 0:k.replaceAll("{color}",y.value),!t.resize&&"resize-none"),t.textareaClass)});return{ui:z,attrs:r,name:p,inputId:A,textarea:_,textareaClass:be,onInput:M,onChange:Y,onBlur:fe}}}),yt=["id","value","name","rows","required","disabled","placeholder"];function _t(t,g,z,r,L,K){return P(),ue("div",{class:Ie(t.ui.wrapper)},[Je("textarea",Qe({id:t.inputId,ref:"textarea",value:t.modelValue,name:t.name,rows:t.rows,required:t.required,disabled:t.disabled,placeholder:t.placeholder,class:t.textareaClass},t.attrs,{onInput:g[0]||(g[0]=(...A)=>t.onInput&&t.onInput(...A)),onBlur:g[1]||(g[1]=(...A)=>t.onBlur&&t.onBlur(...A)),onChange:g[2]||(g[2]=(...A)=>t.onChange&&t.onChange(...A))}),null,16,yt),Le(t.$slots,"default")],2)}const bt=Ve(vt,[["render",_t]]),oe=We(ve.ui.strategy,ve.ui.select,gt),kt=Me({components:{UIcon:Ze},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>oe.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>oe.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},size:{type:String,default:null,validator(t){return Object.keys(oe.size).includes(t)}},color:{type:String,default:()=>oe.default.color,validator(t){return[...ve.ui.colors,...Object.keys(oe.color)].includes(t)}},variant:{type:String,default:()=>oe.default.variant,validator(t){return[...Object.keys(oe.variant),...Object.values(oe.color).flatMap(g=>Object.keys(g))].includes(t)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:"value"},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(t,{emit:g,slots:z}){const{ui:r,attrs:L}=He("select",Oe(t,"ui"),oe,Oe(t,"class")),{size:K,rounded:A}=rt({ui:r,props:t}),{emitFormChange:y,inputId:d,color:p,size:m,name:_}=Ye(t,oe),b=N(()=>K.value||m.value),V=s=>{g("update:modelValue",s.target.value)},W=s=>{y(),g("change",s)},M=s=>Ae(s,t.valueAttribute,Ae(s,t.optionAttribute)),Y=s=>Ae(s,t.optionAttribute,Ae(s,t.valueAttribute)),fe=s=>["string","number","boolean"].includes(typeof s)?{[t.valueAttribute]:s,[t.optionAttribute]:s}:{...s,[t.valueAttribute]:M(s),[t.optionAttribute]:Y(s)},be=N(()=>t.options.map(s=>fe(s))),k=N(()=>t.placeholder?[{[t.valueAttribute]:"",[t.optionAttribute]:t.placeholder,disabled:!0},...be.value]:be.value),G=N(()=>{const s=fe(t.modelValue),S=k.value.find(C=>C[t.valueAttribute]===s[t.valueAttribute]);return S?S[t.valueAttribute]:""}),se=N(()=>{var S,C;const s=((C=(S=r.value.color)==null?void 0:S[p.value])==null?void 0:C[t.variant])||r.value.variant[t.variant];return Ke(Ce(r.value.base,r.value.form,A.value,r.value.size[b.value],t.padded?r.value.padding[b.value]:"p-0",s==null?void 0:s.replaceAll("{color}",p.value),(X.value||z.leading)&&r.value.leading.padding[b.value],(v.value||z.trailing)&&r.value.trailing.padding[b.value]),t.selectClass)}),X=N(()=>t.icon&&t.leading||t.icon&&!t.trailing||t.loading&&!t.trailing||t.leadingIcon),v=N(()=>t.icon&&t.trailing||t.loading&&t.trailing||t.trailingIcon),n=N(()=>t.loading?t.loadingIcon:t.leadingIcon||t.icon),e=N(()=>t.loading&&!X.value?t.loadingIcon:t.trailingIcon||t.icon),a=N(()=>Ce(r.value.icon.leading.wrapper,r.value.icon.leading.pointer,r.value.icon.leading.padding[b.value])),i=N(()=>Ce(r.value.icon.base,p.value&&ve.ui.colors.includes(p.value)&&r.value.icon.color.replaceAll("{color}",p.value),r.value.icon.size[b.value],t.loading&&r.value.icon.loading)),o=N(()=>Ce(r.value.icon.trailing.wrapper,r.value.icon.trailing.pointer,r.value.icon.trailing.padding[b.value])),h=N(()=>Ce(r.value.icon.base,p.value&&ve.ui.colors.includes(p.value)&&r.value.icon.color.replaceAll("{color}",p.value),r.value.icon.size[b.value],t.loading&&!X.value&&r.value.icon.loading));return{ui:r,attrs:L,name:_,inputId:d,normalizedOptionsWithPlaceholder:k,normalizedValue:G,isLeading:X,isTrailing:v,selectClass:se,leadingIconName:n,leadingIconClass:i,leadingWrapperIconClass:a,trailingIconName:e,trailingIconClass:h,trailingWrapperIconClass:o,onInput:V,onChange:W}}}),wt=["id","name","value","required","disabled"],Ct=["value","label"],It=["value","selected","disabled","textContent"],Et=["value","selected","disabled","textContent"];function xt(t,g,z,r,L,K){const A=Ze;return P(),ue("div",{class:Ie(t.ui.wrapper)},[Je("select",Qe({id:t.inputId,name:t.name,value:t.modelValue,required:t.required,disabled:t.disabled||t.loading,class:t.selectClass},t.attrs,{onInput:g[0]||(g[0]=(...y)=>t.onInput&&t.onInput(...y)),onChange:g[1]||(g[1]=(...y)=>t.onChange&&t.onChange(...y))}),[(P(!0),ue(De,null,$e(t.normalizedOptionsWithPlaceholder,(y,d)=>(P(),ue(De,null,[y.children?(P(),ue("optgroup",{key:`${y[t.valueAttribute]}-optgroup-${d}`,value:y[t.valueAttribute],label:y[t.optionAttribute]},[(P(!0),ue(De,null,$e(y.children,(p,m)=>(P(),ue("option",{key:`${p[t.valueAttribute]}-${d}-${m}`,value:p[t.valueAttribute],selected:p[t.valueAttribute]===t.normalizedValue,disabled:p.disabled,textContent:Ne(p[t.optionAttribute])},null,8,It))),128))],8,Ct)):(P(),ue("option",{key:`${y[t.valueAttribute]}-${d}`,value:y[t.valueAttribute],selected:y[t.valueAttribute]===t.normalizedValue,disabled:y.disabled,textContent:Ne(y[t.optionAttribute])},null,8,Et))],64))),256))],16,wt),t.isLeading&&t.leadingIconName||t.$slots.leading?(P(),ue("span",{key:0,class:Ie(t.leadingWrapperIconClass)},[Le(t.$slots,"leading",{disabled:t.disabled,loading:t.loading},()=>[ze(A,{name:t.leadingIconName,class:Ie(t.leadingIconClass)},null,8,["name","class"])])],2)):Se("",!0),t.isTrailing&&t.trailingIconName||t.$slots.trailing?(P(),ue("span",{key:1,class:Ie(t.trailingWrapperIconClass)},[Le(t.$slots,"trailing",{disabled:t.disabled,loading:t.loading},()=>[ze(A,{name:t.trailingIconName,class:Ie(t.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])])],2)):Se("",!0)],2)}const At=Ve(kt,[["render",xt]]);var Pe={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,g){(function(z,r){t.exports=r()})(ct,function z(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},L=!r.document&&!!r.postMessage,K=r.IS_PAPA_WORKER||!1,A={},y=0,d={parse:function(n,e){var a=(e=e||{}).dynamicTyping||!1;if(v(a)&&(e.dynamicTypingFunction=a,a={}),e.dynamicTyping=a,e.transform=!!v(e.transform)&&e.transform,e.worker&&d.WORKERS_SUPPORTED){var i=function(){if(!d.WORKERS_SUPPORTED)return!1;var h=(S=r.URL||r.webkitURL||null,C=z.toString(),d.BLOB_URL||(d.BLOB_URL=S.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",C,")();"],{type:"text/javascript"})))),s=new r.Worker(h),S,C;return s.onmessage=be,s.id=y++,A[s.id]=s}();return i.userStep=e.step,i.userChunk=e.chunk,i.userComplete=e.complete,i.userError=e.error,e.step=v(e.step),e.chunk=v(e.chunk),e.complete=v(e.complete),e.error=v(e.error),delete e.worker,void i.postMessage({input:n,config:e,workerId:i.id})}var o=null;return d.NODE_STREAM_INPUT,typeof n=="string"?(n=function(h){return h.charCodeAt(0)===65279?h.slice(1):h}(n),o=e.download?new _(e):new V(e)):n.readable===!0&&v(n.read)&&v(n.on)?o=new W(e):(r.File&&n instanceof File||n instanceof Object)&&(o=new b(e)),o.stream(n)},unparse:function(n,e){var a=!1,i=!0,o=",",h=`\r
`,s='"',S=s+s,C=!1,u=null,F=!1;(function(){if(typeof e=="object"){if(typeof e.delimiter!="string"||d.BAD_DELIMITERS.filter(function(l){return e.delimiter.indexOf(l)!==-1}).length||(o=e.delimiter),(typeof e.quotes=="boolean"||typeof e.quotes=="function"||Array.isArray(e.quotes))&&(a=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(C=e.skipEmptyLines),typeof e.newline=="string"&&(h=e.newline),typeof e.quoteChar=="string"&&(s=e.quoteChar),typeof e.header=="boolean"&&(i=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");u=e.columns}e.escapeChar!==void 0&&(S=e.escapeChar+s),(typeof e.escapeFormulae=="boolean"||e.escapeFormulae instanceof RegExp)&&(F=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var f=new RegExp(Y(s),"g");if(typeof n=="string"&&(n=JSON.parse(n)),Array.isArray(n)){if(!n.length||Array.isArray(n[0]))return re(null,n,C);if(typeof n[0]=="object")return re(u||Object.keys(n[0]),n,C)}else if(typeof n=="object")return typeof n.data=="string"&&(n.data=JSON.parse(n.data)),Array.isArray(n.data)&&(n.fields||(n.fields=n.meta&&n.meta.fields||u),n.fields||(n.fields=Array.isArray(n.data[0])?n.fields:typeof n.data[0]=="object"?Object.keys(n.data[0]):[]),Array.isArray(n.data[0])||typeof n.data[0]=="object"||(n.data=[n.data])),re(n.fields||[],n.data||[],C);throw new Error("Unable to serialize unrecognized input");function re(l,O,Q){var D="";typeof l=="string"&&(l=JSON.parse(l)),typeof O=="string"&&(O=JSON.parse(O));var H=Array.isArray(l)&&0<l.length,U=!Array.isArray(O[0]);if(H&&i){for(var q=0;q<l.length;q++)0<q&&(D+=o),D+=J(l[q],q);0<O.length&&(D+=h)}for(var c=0;c<O.length;c++){var w=H?l.length:O[c].length,R=!1,$=H?Object.keys(O[c]).length===0:O[c].length===0;if(Q&&!H&&(R=Q==="greedy"?O[c].join("").trim()==="":O[c].length===1&&O[c][0].length===0),Q==="greedy"&&H){for(var E=[],Z=0;Z<w;Z++){var B=U?l[Z]:Z;E.push(O[c][B])}R=E.join("").trim()===""}if(!R){for(var x=0;x<w;x++){0<x&&!$&&(D+=o);var ie=H&&U?l[x]:x;D+=J(O[c][ie],x)}c<O.length-1&&(!Q||0<w&&!$)&&(D+=h)}}return D}function J(l,O){if(l==null)return"";if(l.constructor===Date)return JSON.stringify(l).slice(1,25);var Q=!1;F&&typeof l=="string"&&F.test(l)&&(l="'"+l,Q=!0);var D=l.toString().replace(f,S);return(Q=Q||a===!0||typeof a=="function"&&a(l,O)||Array.isArray(a)&&a[O]||function(H,U){for(var q=0;q<U.length;q++)if(-1<H.indexOf(U[q]))return!0;return!1}(D,d.BAD_DELIMITERS)||-1<D.indexOf(o)||D.charAt(0)===" "||D.charAt(D.length-1)===" ")?s+D+s:D}}};if(d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!L&&!!r.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=fe,d.ParserHandle=M,d.NetworkStreamer=_,d.FileStreamer=b,d.StringStreamer=V,d.ReadableStreamStreamer=W,r.jQuery){var p=r.jQuery;p.fn.parse=function(n){var e=n.config||{},a=[];return this.each(function(h){if(!(p(this).prop("tagName").toUpperCase()==="INPUT"&&p(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var s=0;s<this.files.length;s++)a.push({file:this.files[s],inputElem:this,instanceConfig:p.extend({},e)})}),i(),this;function i(){if(a.length!==0){var h,s,S,C,u=a[0];if(v(n.before)){var F=n.before(u.file,u.inputElem);if(typeof F=="object"){if(F.action==="abort")return h="AbortError",s=u.file,S=u.inputElem,C=F.reason,void(v(n.error)&&n.error({name:h},s,S,C));if(F.action==="skip")return void o();typeof F.config=="object"&&(u.instanceConfig=p.extend(u.instanceConfig,F.config))}else if(F==="skip")return void o()}var f=u.instanceConfig.complete;u.instanceConfig.complete=function(re){v(f)&&f(re,u.file,u.inputElem),o()},d.parse(u.file,u.instanceConfig)}else v(n.complete)&&n.complete()}function o(){a.splice(0,1),i()}}}function m(n){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var a=se(e);a.chunkSize=parseInt(a.chunkSize),e.step||e.chunk||(a.chunkSize=null),this._handle=new M(a),(this._handle.streamer=this)._config=a}).call(this,n),this.parseChunk=function(e,a){if(this.isFirstChunk&&v(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);i!==void 0&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+e;this._partialLine="";var h=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=h.meta.cursor;this._finished||(this._partialLine=o.substring(s-this._baseIndex),this._baseIndex=s),h&&h.data&&(this._rowCount+=h.data.length);var S=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(K)r.postMessage({results:h,workerId:d.WORKER_ID,finished:S});else if(v(this._config.chunk)&&!a){if(this._config.chunk(h,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);h=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(h.data),this._completeResults.errors=this._completeResults.errors.concat(h.errors),this._completeResults.meta=h.meta),this._completed||!S||!v(this._config.complete)||h&&h.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),S||h&&h.meta.paused||this._nextChunk(),h}this._halted=!0},this._sendError=function(e){v(this._config.error)?this._config.error(e):K&&this._config.error&&r.postMessage({workerId:d.WORKER_ID,error:e,finished:!1})}}function _(n){var e;(n=n||{}).chunkSize||(n.chunkSize=d.RemoteChunkSize),m.call(this,n),this._nextChunk=L?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(a){this._input=a,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),L||(e.onload=X(this._chunkLoaded,this),e.onerror=X(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!L),this._config.downloadRequestHeaders){var a=this._config.downloadRequestHeaders;for(var i in a)e.setRequestHeader(i,a[i])}if(this._config.chunkSize){var o=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+o)}try{e.send(this._config.downloadRequestBody)}catch(h){this._chunkError(h.message)}L&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(a){var i=a.getResponseHeader("Content-Range");return i===null?-1:parseInt(i.substring(i.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(a){var i=e.statusText||a;this._sendError(new Error(i))}}function b(n){var e,a;(n=n||{}).chunkSize||(n.chunkSize=d.LocalChunkSize),m.call(this,n);var i=typeof FileReader<"u";this.stream=function(o){this._input=o,a=o.slice||o.webkitSlice||o.mozSlice,i?((e=new FileReader).onload=X(this._chunkLoaded,this),e.onerror=X(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var o=this._input;if(this._config.chunkSize){var h=Math.min(this._start+this._config.chunkSize,this._input.size);o=a.call(o,this._start,h)}var s=e.readAsText(o,this._config.encoding);i||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(o){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(o.target.result)},this._chunkError=function(){this._sendError(e.error)}}function V(n){var e;m.call(this,n=n||{}),this.stream=function(a){return e=a,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var a,i=this._config.chunkSize;return i?(a=e.substring(0,i),e=e.substring(i)):(a=e,e=""),this._finished=!e,this.parseChunk(a)}}}function W(n){m.call(this,n=n||{});var e=[],a=!0,i=!1;this.pause=function(){m.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){m.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(o){this._input=o,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):a=!0},this._streamData=X(function(o){try{e.push(typeof o=="string"?o:o.toString(this._config.encoding)),a&&(a=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(h){this._streamError(h)}},this),this._streamError=X(function(o){this._streamCleanUp(),this._sendError(o)},this),this._streamEnd=X(function(){this._streamCleanUp(),i=!0,this._streamData("")},this),this._streamCleanUp=X(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function M(n){var e,a,i,o=Math.pow(2,53),h=-o,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,S=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,C=this,u=0,F=0,f=!1,re=!1,J=[],l={data:[],errors:[],meta:{}};if(v(n.step)){var O=n.step;n.step=function(c){if(l=c,H())D();else{if(D(),l.data.length===0)return;u+=c.data.length,n.preview&&u>n.preview?a.abort():(l.data=l.data[0],O(l,C))}}}function Q(c){return n.skipEmptyLines==="greedy"?c.join("").trim()==="":c.length===1&&c[0].length===0}function D(){return l&&i&&(q("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),i=!1),n.skipEmptyLines&&(l.data=l.data.filter(function(c){return!Q(c)})),H()&&function(){if(!l)return;function c(R,$){v(n.transformHeader)&&(R=n.transformHeader(R,$)),J.push(R)}if(Array.isArray(l.data[0])){for(var w=0;H()&&w<l.data.length;w++)l.data[w].forEach(c);l.data.splice(0,1)}else l.data.forEach(c)}(),function(){if(!l||!n.header&&!n.dynamicTyping&&!n.transform)return l;function c(R,$){var E,Z=n.header?{}:[];for(E=0;E<R.length;E++){var B=E,x=R[E];n.header&&(B=E>=J.length?"__parsed_extra":J[E]),n.transform&&(x=n.transform(x,B)),x=U(B,x),B==="__parsed_extra"?(Z[B]=Z[B]||[],Z[B].push(x)):Z[B]=x}return n.header&&(E>J.length?q("FieldMismatch","TooManyFields","Too many fields: expected "+J.length+" fields but parsed "+E,F+$):E<J.length&&q("FieldMismatch","TooFewFields","Too few fields: expected "+J.length+" fields but parsed "+E,F+$)),Z}var w=1;return!l.data.length||Array.isArray(l.data[0])?(l.data=l.data.map(c),w=l.data.length):l.data=c(l.data,0),n.header&&l.meta&&(l.meta.fields=J),F+=w,l}()}function H(){return n.header&&J.length===0}function U(c,w){return R=c,n.dynamicTypingFunction&&n.dynamicTyping[R]===void 0&&(n.dynamicTyping[R]=n.dynamicTypingFunction(R)),(n.dynamicTyping[R]||n.dynamicTyping)===!0?w==="true"||w==="TRUE"||w!=="false"&&w!=="FALSE"&&(function($){if(s.test($)){var E=parseFloat($);if(h<E&&E<o)return!0}return!1}(w)?parseFloat(w):S.test(w)?new Date(w):w===""?null:w):w;var R}function q(c,w,R,$){var E={type:c,code:w,message:R};$!==void 0&&(E.row=$),l.errors.push(E)}this.parse=function(c,w,R){var $=n.quoteChar||'"';if(n.newline||(n.newline=function(B,x){B=B.substring(0,1048576);var ie=new RegExp(Y(x)+"([^]*?)"+Y(x),"gm"),ee=(B=B.replace(ie,"")).split("\r"),le=B.split(`
`),de=1<le.length&&le[0].length<ee[0].length;if(ee.length===1||de)return`
`;for(var te=0,T=0;T<ee.length;T++)ee[T][0]===`
`&&te++;return te>=ee.length/2?`\r
`:"\r"}(c,$)),i=!1,n.delimiter)v(n.delimiter)&&(n.delimiter=n.delimiter(c),l.meta.delimiter=n.delimiter);else{var E=function(B,x,ie,ee,le){var de,te,T,j;le=le||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var ye=0;ye<le.length;ye++){var I=le[ye],ke=0,ce=0,_e=0;T=void 0;for(var he=new fe({comments:ee,delimiter:I,newline:x,preview:10}).parse(B),ge=0;ge<he.data.length;ge++)if(ie&&Q(he.data[ge]))_e++;else{var pe=he.data[ge].length;ce+=pe,T!==void 0?0<pe&&(ke+=Math.abs(pe-T),T=pe):T=pe}0<he.data.length&&(ce/=he.data.length-_e),(te===void 0||ke<=te)&&(j===void 0||j<ce)&&1.99<ce&&(te=ke,de=I,j=ce)}return{successful:!!(n.delimiter=de),bestDelimiter:de}}(c,n.newline,n.skipEmptyLines,n.comments,n.delimitersToGuess);E.successful?n.delimiter=E.bestDelimiter:(i=!0,n.delimiter=d.DefaultDelimiter),l.meta.delimiter=n.delimiter}var Z=se(n);return n.preview&&n.header&&Z.preview++,e=c,a=new fe(Z),l=a.parse(e,w,R),D(),f?{meta:{paused:!0}}:l||{meta:{paused:!1}}},this.paused=function(){return f},this.pause=function(){f=!0,a.abort(),e=v(n.chunk)?"":e.substring(a.getCharIndex())},this.resume=function(){C.streamer._halted?(f=!1,C.streamer.parseChunk(e,!0)):setTimeout(C.resume,3)},this.aborted=function(){return re},this.abort=function(){re=!0,a.abort(),l.meta.aborted=!0,v(n.complete)&&n.complete(l),e=""}}function Y(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function fe(n){var e,a=(n=n||{}).delimiter,i=n.newline,o=n.comments,h=n.step,s=n.preview,S=n.fastMode,C=e=n.quoteChar===void 0||n.quoteChar===null?'"':n.quoteChar;if(n.escapeChar!==void 0&&(C=n.escapeChar),(typeof a!="string"||-1<d.BAD_DELIMITERS.indexOf(a))&&(a=","),o===a)throw new Error("Comment character same as delimiter");o===!0?o="#":(typeof o!="string"||-1<d.BAD_DELIMITERS.indexOf(o))&&(o=!1),i!==`
`&&i!=="\r"&&i!==`\r
`&&(i=`
`);var u=0,F=!1;this.parse=function(f,re,J){if(typeof f!="string")throw new Error("Input must be a string");var l=f.length,O=a.length,Q=i.length,D=o.length,H=v(h),U=[],q=[],c=[],w=u=0;if(!f)return ne();if(n.header&&!re){var R=f.split(i)[0].split(a),$=[],E={},Z=!1;for(var B in R){var x=R[B];v(n.transformHeader)&&(x=n.transformHeader(x,B));var ie=x,ee=E[x]||0;for(0<ee&&(Z=!0,ie=x+"_"+ee),E[x]=ee+1;$.includes(ie);)ie=ie+"_"+ee;$.push(ie)}if(Z){var le=f.split(i);le[0]=$.join(a),f=le.join(i)}}if(S||S!==!1&&f.indexOf(e)===-1){for(var de=f.split(i),te=0;te<de.length;te++){if(c=de[te],u+=c.length,te!==de.length-1)u+=i.length;else if(J)return ne();if(!o||c.substring(0,D)!==o){if(H){if(U=[],_e(c.split(a)),xe(),F)return ne()}else _e(c.split(a));if(s&&s<=te)return U=U.slice(0,s),ne(!0)}}return ne()}for(var T=f.indexOf(a,u),j=f.indexOf(i,u),ye=new RegExp(Y(C)+Y(e),"g"),I=f.indexOf(e,u);;)if(f[u]!==e)if(o&&c.length===0&&f.substring(u,u+D)===o){if(j===-1)return ne();u=j+Q,j=f.indexOf(i,u),T=f.indexOf(a,u)}else if(T!==-1&&(T<j||j===-1))c.push(f.substring(u,T)),u=T+O,T=f.indexOf(a,u);else{if(j===-1)break;if(c.push(f.substring(u,j)),pe(j+Q),H&&(xe(),F))return ne();if(s&&U.length>=s)return ne(!0)}else for(I=u,u++;;){if((I=f.indexOf(e,I+1))===-1)return J||q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:U.length,index:u}),ge();if(I===l-1)return ge(f.substring(u,I).replace(ye,e));if(e!==C||f[I+1]!==C){if(e===C||I===0||f[I-1]!==C){T!==-1&&T<I+1&&(T=f.indexOf(a,I+1)),j!==-1&&j<I+1&&(j=f.indexOf(i,I+1));var ke=he(j===-1?T:Math.min(T,j));if(f.substr(I+1+ke,O)===a){c.push(f.substring(u,I).replace(ye,e)),f[u=I+1+ke+O]!==e&&(I=f.indexOf(e,u)),T=f.indexOf(a,u),j=f.indexOf(i,u);break}var ce=he(j);if(f.substring(I+1+ce,I+1+ce+Q)===i){if(c.push(f.substring(u,I).replace(ye,e)),pe(I+1+ce+Q),T=f.indexOf(a,u),I=f.indexOf(e,u),H&&(xe(),F))return ne();if(s&&U.length>=s)return ne(!0);break}q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:U.length,index:u}),I++}}else I++}return ge();function _e(ae){U.push(ae),w=u}function he(ae){var je=0;if(ae!==-1){var Re=f.substring(I+1,ae);Re&&Re.trim()===""&&(je=Re.length)}return je}function ge(ae){return J||(ae===void 0&&(ae=f.substring(u)),c.push(ae),u=l,_e(c),H&&xe()),ne()}function pe(ae){u=ae,_e(c),c=[],j=f.indexOf(i,u)}function ne(ae){return{data:U,errors:q,meta:{delimiter:a,linebreak:i,aborted:F,truncated:!!ae,cursor:w+(re||0)}}}function xe(){h(ne()),U=[],q=[]}},this.abort=function(){F=!0},this.getCharIndex=function(){return u}}function be(n){var e=n.data,a=A[e.workerId],i=!1;if(e.error)a.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){i=!0,k(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:G,resume:G};if(v(a.userStep)){for(var h=0;h<e.results.data.length&&(a.userStep({data:e.results.data[h],errors:e.results.errors,meta:e.results.meta},o),!i);h++);delete e.results}else v(a.userChunk)&&(a.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!i&&k(e.workerId,e.results)}function k(n,e){var a=A[n];v(a.userComplete)&&a.userComplete(e),a.terminate(),delete A[n]}function G(){throw new Error("Not implemented.")}function se(n){if(typeof n!="object"||n===null)return n;var e=Array.isArray(n)?[]:{};for(var a in n)e[a]=se(n[a]);return e}function X(n,e){return function(){n.apply(e,arguments)}}function v(n){return typeof n=="function"}return K&&(r.onmessage=function(n){var e=n.data;if(d.WORKER_ID===void 0&&e&&(d.WORKER_ID=e.workerId),typeof e.input=="string")r.postMessage({workerId:d.WORKER_ID,results:d.parse(e.input,e.config),finished:!0});else if(r.File&&e.input instanceof File||e.input instanceof Object){var a=d.parse(e.input,e.config);a&&r.postMessage({workerId:d.WORKER_ID,results:a,finished:!0})}}),(_.prototype=Object.create(m.prototype)).constructor=_,(b.prototype=Object.create(m.prototype)).constructor=b,(V.prototype=Object.create(V.prototype)).constructor=V,(W.prototype=Object.create(m.prototype)).constructor=W,d})})(Pe);var Ot=Pe.exports;const zt=ft(Ot),Tt=Me({__name:"convert",async setup(t){let g,z;if(it().public.site_env!=="preview")throw st({statusCode:404,statusMessage:"Page not found",fatal:!0});const r=Ee(""),L=Ee(""),{data:K}=([g,z]=lt(()=>ot("/api/meta.yml","$dg4wxn2PdN")),g=await g,z(),g),A=N(()=>{var p;return r.value?(p=zt.parse(r.value))==null?void 0:p.data:void 0}),y=N(()=>{if(!A.value)return;const p=A.value[0].map(m=>m.trim());return A.value.slice(1).reduce((m,_)=>{const b=p.reduce((W,M,Y)=>(M&&(W[M]=_[Y].trim()),W),{}),{ID:V}=b;return delete b.ID,m.set(V,b),m},new Map)});function d(p){return K.value.replace(/^( *)([^\n{]+){([^:}]+):?([^}]+)?}.*\n/gm,(m,_,b,V,W)=>{let M=y.value.get(p)[V];if(!M)return"";if(W)switch(W){case"Boolean":M="true";break;case"Array":M=["",...M.split(/, ?/)].join(`
`+_+"  - ");break}return _+b+M+`
`}).replace(/^ {2}.+?:\n(?= {2}\S)/gm,"")}return(p,m)=>{const _=bt,b=At,V=ut,W=dt;return P(),Fe(W,{class:"mt-4"},{default:Ue(()=>[ze(_,{modelValue:we(r),"onUpdate:modelValue":m[0]||(m[0]=M=>qe(r)?r.value=M:null),placeholder:"CSV",rows:5},null,8,["modelValue"]),ze(V,null,{default:Ue(()=>{var M;return[(M=we(y))!=null&&M.size?(P(),Fe(b,{key:0,modelValue:we(L),"onUpdate:modelValue":m[1]||(m[1]=Y=>qe(L)?L.value=Y:null),options:[...we(y).keys()],placeholder:"ID",class:"mt-8"},null,8,["modelValue","options"])):Se("",!0),we(L)?(P(),Fe(_,{key:1,"model-value":d(we(L)),autoresize:"",class:"mt-8"},null,8,["model-value"])):Se("",!0)]}),_:1})]),_:1})}}});export{Tt as default};
