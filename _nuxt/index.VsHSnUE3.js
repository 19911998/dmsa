import{_ as M}from"./Aside.vue.nXwe0zRA.js";import{_ as I}from"./PageLinks.vue.3OiywA3f.js";import{_ as R,a as V}from"./PageBody.vue.Yjg23gxM.js";import{d as w,b as l,c as h,F as $,af as x,ag as p,w as o,g as r,t as U,ak as b,f as C,ab as q,aS as z,aT as F,D as y,aJ as k,aK as H,aL as J,E as s,ah as K,ax as O,v as Q,aM as v,aN as j,aU as G,s as f}from"./entry.aIF1FHM7.js";import{_ as W,a as X}from"./BlogList.vue.8irKXULN.js";import"./nuxt-img.xvYVlvnJ.js";const Y={key:0,class:"flex gap-x-2"},Z=w({__name:"TagList",props:{base:{},tags:{},pageTag:{}},setup(B){return(e,c)=>{const a=q,_=z,u=F;return e.tags?(l(),h("div",Y,[(l(!0),h($,null,x(e.tags,t=>(l(),p(u,{key:t,class:"z-50",color:t===e.pageTag?"primary":"gray"},{default:o(()=>[r(_,{to:t===e.pageTag?e.base:e.base+"?tag="+encodeURIComponent(t),class:"flex items-center gap-x-2"},{default:o(()=>[r(a,{name:"i-heroicons-tag"}),b(" "+U(t),1)]),_:2},1032,["to"])]),_:2},1032,["color"]))),128))])):C("",!0)}}}),re=w({__name:"index",async setup(B){let e,c;const a=y(()=>Q().query.tag),{data:_}=([e,c]=k(()=>v(a.value?"tag-"+a.value:"blog-posts",()=>(a.value?f("blog").where({tags:{$contains:a.value}}):f("blog")).without("body").sort({createdAt:-1}).find(),{watch:[a]})),e=await e,c(),e);if(!_.value.length)throw H({statusCode:404,statusMessage:"Page not found",fatal:!0});const u=y(()=>Array.from(_.value.reduce((i,m)=>{for(const g of m.tags)i.set(g,(i.get(g)||0)+1);return i},new Map)).sort((i,m)=>m[1]-i[1])),{data:t}=([e,c]=k(()=>v("blog-overview",()=>f("_blog").findOne())),e=await e,c(),e);return J({title:t.value.title,ogTitle:t.value.title,description:t.value.description,ogDescription:t.value.description}),(i,m)=>{const g=M,L=I,T=R,A=Z,P=X,D=W,S=V,N=j,E=G;return l(),p(E,null,{default:o(()=>[r(N,null,{left:o(()=>[r(g,{links:s(t).links},null,8,["links"])]),right:o(()=>[r(g,null,{default:o(()=>[s(u).length?(l(),p(L,{key:0,links:[...s(u)].map(([n,d])=>({label:`${n} (${d})`,to:`/blog?tag=${encodeURIComponent(n)}`,icon:"i-heroicons-tag",exactQuery:!0})),title:"Schlagworte"},null,8,["links"])):C("",!0)]),_:1})]),default:o(()=>[r(T,K(s(t).hero,{links:s(a)?[{label:"Alle Blog-EintrÃ¤ge",to:"/blog",target:"_self",icon:"i-heroicons-arrow-uturn-left"}]:void 0}),O({_:2},[s(a)?{name:"headline",fn:o(()=>[b(" #"+U(s(a)),1)]),key:"0"}:void 0]),1040,["links"]),r(S,null,{default:o(()=>[r(D,{orientation:"vertical"},{default:o(()=>[(l(!0),h($,null,x(s(_),(n,d)=>(l(),p(P,{key:d,to:n._path,title:n.title,description:n.description,image:n.image,date:new Date(n.createdAt).toLocaleDateString("de",{year:"numeric",month:"short",day:"numeric"}),badge:n.badge,orientation:"horizontal",class:"col-span-full",ui:{description:"line-clamp-2"}},{badge:o(()=>[r(A,{base:"/blog",tags:n.tags,"page-tag":s(a),class:"mt-4"},null,8,["tags","page-tag"])]),_:2},1032,["to","title","description","image","date","badge"]))),128))]),_:1}),b(" x ")]),_:1})]),_:1})]),_:1})}}});export{re as default};
