import{E as M,G as j,H as Tt,I as G,J as Be,K as $t,r as L,L as fe,M as Je,d as ne,N as re,O as At,P as z,C as Z,Q as _t,R as Xe,S as Pt,U as be,o as pe,V as ye,W as Ft,X as Lt,Y as zt,Z as Me,$ as Le,F as xe,a0 as ze,a1 as Se,a2 as Nt,a3 as Qe,a4 as Bt,a5 as Dt,a6 as De,a7 as X,a8 as Ze,a9 as je,a as jt,aa as Vt,ab as H,m as et,ac as Ee,ad as tt,ae as nt,af as st,ag as it,ah as he,b as P,c as K,n as F,t as ee,f as W,e as te,ai as Ie,aj as U,w as ue,ak as ae,al as Oe,am as Kt,j as Ut,an as Ht,ao as Ve,ap as ot,aq as lt,ar as Re,as as rt,at,au as Wt,av as qt,g as ut,aw as Gt,ax as Yt,ay as Jt,az as Xt,aA as ct,aB as Qt,u as Zt,z as en,aC as tn,aD as nn,aE as sn,aF as on,aG as ln,aH as rn}from"./g4rRCnj9.js";function oe(e,n,t){let i=t.initialDeps??[],s;return()=>{var l,r,o,c;let d;t.key&&((l=t.debug)!=null&&l.call(t))&&(d=Date.now());const a=e();if(!(a.length!==i.length||a.some((b,O)=>i[O]!==b)))return s;i=a;let v;if(t.key&&((r=t.debug)!=null&&r.call(t))&&(v=Date.now()),s=n(...a),t.key&&((o=t.debug)!=null&&o.call(t))){const b=Math.round((Date.now()-d)*100)/100,O=Math.round((Date.now()-v)*100)/100,E=O/16,A=(I,C)=>{for(I=String(I);I.length<C;)I=" "+I;return I};console.info(`%c⏱ ${A(O,5)} /${A(b,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*E,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(c=t==null?void 0:t.onChange)==null||c.call(t,s),s}}function ke(e,n){if(e===void 0)throw new Error(`Unexpected undefined${n?`: ${n}`:""}`);return e}const an=(e,n)=>Math.abs(e-n)<1,un=e=>e,cn=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),i=[];for(let s=n;s<=t;s++)i.push(s);return i},dn=(e,n)=>{const t=e.scrollElement;if(!t)return;const i=l=>{const{width:r,height:o}=l;n({width:Math.round(r),height:Math.round(o)})};if(i(t.getBoundingClientRect()),typeof ResizeObserver>"u")return()=>{};const s=new ResizeObserver(l=>{const r=l[0];if(r!=null&&r.borderBoxSize){const o=r.borderBoxSize[0];if(o){i({width:o.inlineSize,height:o.blockSize});return}}i(t.getBoundingClientRect())});return s.observe(t,{box:"border-box"}),()=>{s.unobserve(t)}},hn=(e,n)=>{const t=e.scrollElement;if(!t)return;const i=()=>{n(t[e.options.horizontal?"scrollLeft":"scrollTop"])};return i(),t.addEventListener("scroll",i,{passive:!0}),()=>{t.removeEventListener("scroll",i)}},fn=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const i=n.borderBoxSize[0];if(i)return Math.round(i[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},pn=(e,{adjustments:n=0,behavior:t},i)=>{var s,l;const r=e+n;(l=(s=i.scrollElement)==null?void 0:s.scrollTo)==null||l.call(s,{[i.options.horizontal?"left":"top"]:r,behavior:t})};class vn{constructor(n){this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let t=null;const i=()=>t||(typeof ResizeObserver<"u"?t=new ResizeObserver(s=>{s.forEach(l=>{this._measureElement(l.target,l)})}):null);return{disconnect:()=>{var s;return(s=i())==null?void 0:s.disconnect()},observe:s=>{var l;return(l=i())==null?void 0:l.observe(s,{box:"border-box"})},unobserve:s=>{var l;return(l=i())==null?void 0:l.unobserve(s)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([i,s])=>{typeof s>"u"&&delete t[i]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:un,rangeExtractor:cn,onChange:()=>{},measureElement:fn,initialRect:{width:0,height:0},scrollMargin:0,gap:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,...t}},this.notify=t=>{var i,s;(s=(i=this.options).onChange)==null||s.call(i,this,t)},this.maybeNotify=oe(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{const t=this.options.getScrollElement();this.scrollElement!==t&&(this.cleanup(),this.scrollElement=t,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,i=>{this.scrollAdjustments=0,this.scrollOffset!==i&&(this.isScrollingTimeoutId!==null&&(clearTimeout(this.isScrollingTimeoutId),this.isScrollingTimeoutId=null),this.isScrolling=!0,this.scrollDirection=this.scrollOffset<i?"forward":"backward",this.scrollOffset=i,this.maybeNotify(),this.isScrollingTimeoutId=setTimeout(()=>{this.isScrollingTimeoutId=null,this.isScrolling=!1,this.scrollDirection=null,this.maybeNotify()},this.options.scrollingDelay))})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.memoOptions=oe(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(t,i,s,l)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:i,scrollMargin:s,getItemKey:l}),{key:!1}),this.getFurthestMeasurement=(t,i)=>{const s=new Map,l=new Map;for(let r=i-1;r>=0;r--){const o=t[r];if(s.has(o.lane))continue;const c=l.get(o.lane);if(c==null||o.end>c.end?l.set(o.lane,o):o.end<c.end&&s.set(o.lane,!0),s.size===this.options.lanes)break}return l.size===this.options.lanes?Array.from(l.values()).sort((r,o)=>r.end===o.end?r.index-o.index:r.end-o.end)[0]:void 0},this.getMeasurements=oe(()=>[this.memoOptions(),this.itemSizeCache],({count:t,paddingStart:i,scrollMargin:s,getItemKey:l},r)=>{const o=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,o);for(let d=o;d<t;d++){const a=l(d),h=this.options.lanes===1?c[d-1]:this.getFurthestMeasurement(c,d),v=h?h.end+this.options.gap:i+s,b=r.get(a),O=typeof b=="number"?b:this.options.estimateSize(d),E=v+O,A=h?h.lane:d%this.options.lanes;c[d]={index:d,start:v,size:O,end:E,key:a,lane:A}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=oe(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(t,i,s)=>this.range=t.length>0&&i>0?mn({measurements:t,outerSize:i,scrollOffset:s}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=oe(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,i,s,l)=>i===null?[]:t({...i,overscan:s,count:l}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const i=this.options.indexAttribute,s=t.getAttribute(i);return s?parseInt(s,10):(console.warn(`Missing attribute name '${i}={index}' on measured element.`),-1)},this._measureElement=(t,i)=>{const s=this.measurementsCache[this.indexFromElement(t)];if(!s||!t.isConnected){this.measureElementCache.forEach((o,c)=>{o===t&&(this.observer.unobserve(t),this.measureElementCache.delete(c))});return}const l=this.measureElementCache.get(s.key);l!==t&&(l&&this.observer.unobserve(l),this.observer.observe(t),this.measureElementCache.set(s.key,t));const r=this.options.measureElement(t,i,this);this.resizeItem(s,r)},this.resizeItem=(t,i)=>{const s=this.itemSizeCache.get(t.key)??t.size,l=i-s;l!==0&&(t.start<this.scrollOffset+this.scrollAdjustments&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(t.index),this.itemSizeCache=new Map(this.itemSizeCache.set(t.key,i)),this.notify(!1))},this.measureElement=t=>{t&&this._measureElement(t,void 0)},this.getVirtualItems=oe(()=>[this.getIndexes(),this.getMeasurements()],(t,i)=>{const s=[];for(let l=0,r=t.length;l<r;l++){const o=t[l],c=i[o];s.push(c)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const i=this.getMeasurements();return ke(i[dt(0,i.length-1,s=>ke(i[s]).start,t)])},this.getOffsetForAlignment=(t,i)=>{const s=this.getSize();i==="auto"&&(t<=this.scrollOffset?i="start":t>=this.scrollOffset+s?i="end":i="start"),i==="start"?t=t:i==="end"?t=t-s:i==="center"&&(t=t-s/2);const l=this.options.horizontal?"scrollWidth":"scrollHeight",o=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[l]:this.scrollElement[l]:0)-this.getSize();return Math.max(Math.min(o,t),0)},this.getOffsetForIndex=(t,i="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const s=ke(this.getMeasurements()[t]);if(i==="auto")if(s.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)i="end";else if(s.start<=this.scrollOffset+this.options.scrollPaddingStart)i="start";else return[this.scrollOffset,i];const l=i==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,i),i]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&(clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:i="start",behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,i),{adjustments:void 0,behavior:s})},this.scrollToIndex=(t,{align:i="auto",behavior:s}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[l,r]=this.getOffsetForIndex(t,i);this._scrollToOffset(l,{adjustments:void 0,behavior:s}),s!=="smooth"&&this.isDynamicMode()&&(this.scrollToIndexTimeoutId=setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(t))){const[c]=this.getOffsetForIndex(t,r);an(c,this.scrollOffset)||this.scrollToIndex(t,{align:r,behavior:s})}else this.scrollToIndex(t,{align:r,behavior:s})}))},this.scrollBy=(t,{behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+t,{adjustments:void 0,behavior:i})},this.getTotalSize=()=>{var t;const i=this.getMeasurements();let s;return i.length===0?s=this.options.paddingStart:s=this.options.lanes===1?((t=i[i.length-1])==null?void 0:t.end)??0:Math.max(...i.slice(-this.options.lanes).map(l=>l.end)),s-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(t,{adjustments:i,behavior:s})=>{this.options.scrollToFn(t,{behavior:s,adjustments:i},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(t=>{this.itemSizeCache.set(t.key,t.size)}),this.maybeNotify()}}const dt=(e,n,t,i)=>{for(;e<=n;){const s=(e+n)/2|0,l=t(s);if(l<i)e=s+1;else if(l>i)n=s-1;else return s}return e>0?e-1:0};function mn({measurements:e,outerSize:n,scrollOffset:t}){const i=e.length-1,l=dt(0,i,o=>e[o].start,t);let r=l;for(;r<i&&e[r].end<t+n;)r++;return{startIndex:l,endIndex:r}}function gn(e){const n=new vn(j(e)),t=Tt(n),i=n._didMount();return G(()=>j(e).getScrollElement(),s=>{s&&n._willUpdate()},{immediate:!0}),G(()=>j(e),s=>{n.setOptions({...s,onChange:(l,r)=>{var o;Be(t),(o=s.onChange)==null||o.call(s,l,r)}}),n._willUpdate(),Be(t)},{immediate:!0}),$t(i),t}function bn(e){return gn(M(()=>({observeElementRect:dn,observeElementOffset:hn,scrollToFn:pn,...j(e)})))}function yn(e,n,t){let i=L(t==null?void 0:t.value),s=M(()=>e.value!==void 0);return[M(()=>s.value?e.value:i.value),function(l){return s.value||(i.value=l),n==null?void 0:n(l)}]}function Ke(e){return[e.screenX,e.screenY]}function xn(){let e=L([-1,-1]);return{wasMoved(n){let t=Ke(n);return e.value[0]===t[0]&&e.value[1]===t[1]?!1:(e.value=t,!0)},update(n){e.value=Ke(n)}}}function Sn({container:e,accept:n,walk:t,enabled:i}){fe(()=>{let s=e.value;if(!s||i!==void 0&&!i.value)return;let l=Je(e);if(!l)return;let r=Object.assign(c=>n(c),{acceptNode:n}),o=l.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,r,!1);for(;o.nextNode();)t(o.currentNode)})}function In(e){throw new Error("Unexpected object: "+e)}var D=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(D||{});function Ue(e,n){let t=n.resolveItems();if(t.length<=0)return null;let i=n.resolveActiveIndex(),s=i??-1;switch(e.focus){case 0:{for(let l=0;l<t.length;++l)if(!n.resolveDisabled(t[l],l,t))return l;return i}case 1:{s===-1&&(s=t.length);for(let l=s-1;l>=0;--l)if(!n.resolveDisabled(t[l],l,t))return l;return i}case 2:{for(let l=s+1;l<t.length;++l)if(!n.resolveDisabled(t[l],l,t))return l;return i}case 3:{for(let l=t.length-1;l>=0;--l)if(!n.resolveDisabled(t[l],l,t))return l;return i}case 4:{for(let l=0;l<t.length;++l)if(n.resolveId(t[l],l,t)===e.id)return l;return i}case 5:return null;default:In(e)}}function ht(e={},n=null,t=[]){for(let[i,s]of Object.entries(e))pt(t,ft(n,i),s);return t}function ft(e,n){return e?e+"["+n+"]":n}function pt(e,n,t){if(Array.isArray(t))for(let[i,s]of t.entries())pt(e,ft(n,i.toString()),s);else t instanceof Date?e.push([n,t.toISOString()]):typeof t=="boolean"?e.push([n,t?"1":"0"]):typeof t=="string"?e.push([n,t]):typeof t=="number"?e.push([n,`${t}`]):t==null?e.push([n,""]):ht(t,n,e)}var On={};function wn(e,n){return e===n}var Mn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Mn||{}),En=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(En||{}),kn=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(kn||{});let vt=Symbol("ComboboxContext");function ve(e){let n=Qe(vt,null);if(n===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ve),t}return n}let mt=Symbol("VirtualContext"),Cn=ne({name:"VirtualProvider",setup(e,{slots:n}){let t=ve("VirtualProvider"),i=M(()=>{let o=z(t.optionsRef);if(!o)return{start:0,end:0};let c=window.getComputedStyle(o);return{start:parseFloat(c.paddingBlockStart||c.paddingTop),end:parseFloat(c.paddingBlockEnd||c.paddingBottom)}}),s=bn(M(()=>({scrollPaddingStart:i.value.start,scrollPaddingEnd:i.value.end,count:t.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return z(t.optionsRef)},overscan:12}))),l=M(()=>{var o;return(o=t.virtual.value)==null?void 0:o.options}),r=L(0);return G([l],()=>{r.value+=1}),Xe(mt,t.virtual.value?s:null),()=>[ye("div",{style:{position:"relative",width:"100%",height:`${s.value.getTotalSize()}px`},ref:o=>{if(o){if(typeof process<"u"&&On.JEST_WORKER_ID!==void 0||t.activationTrigger.value===0)return;t.activeOptionIndex.value!==null&&t.virtual.value.options.length>t.activeOptionIndex.value&&s.value.scrollToIndex(t.activeOptionIndex.value)}}},s.value.getVirtualItems().map(o=>Bt(n.default({option:t.virtual.value.options[o.index],open:t.comboboxState.value===0})[0],{key:`${r.value}-${o.index}`,"data-index":o.index,"aria-setsize":t.virtual.value.options.length,"aria-posinset":o.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${o.start}px)`,overflowAnchor:"none"}})))]}}),Rn=ne({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:n,attrs:t,emit:i}){let s=L(1),l=L(null),r=L(null),o=L(null),c=L(null),d=L({static:!1,hold:!1}),a=L([]),h=L(null),v=L(2),b=L(!1);function O(u=f=>f){let f=h.value!==null?a.value[h.value]:null,m=u(a.value.slice()),g=m.length>0&&m[0].dataRef.order.value!==null?m.sort((T,N)=>T.dataRef.order.value-N.dataRef.order.value):Dt(m,T=>z(T.dataRef.domRef)),x=f?g.indexOf(f):null;return x===-1&&(x=null),{options:g,activeOptionIndex:x}}let E=M(()=>e.multiple?1:0),A=M(()=>e.nullable),[I,C]=yn(M(()=>e.modelValue),u=>i("update:modelValue",u),M(()=>e.defaultValue)),_=M(()=>I.value===void 0?re(E.value,{1:[],0:void 0}):I.value),y=null,$=null;function R(u){return re(E.value,{0(){return C==null?void 0:C(u)},1:()=>{let f=Z(p.value.value).slice(),m=Z(u),g=f.findIndex(x=>p.compare(m,Z(x)));return g===-1?f.push(m):f.splice(g,1),C==null?void 0:C(f)}})}let S=M(()=>{});G([S],([u],[f])=>{if(p.virtual.value&&u&&f&&h.value!==null){let m=u.indexOf(f[h.value]);m!==-1?h.value=m:h.value=null}});let p={comboboxState:s,value:_,mode:E,compare(u,f){if(typeof e.by=="string"){let m=e.by;return(u==null?void 0:u[m])===(f==null?void 0:f[m])}return e.by===null?wn(u,f):e.by(u,f)},calculateIndex(u){return p.virtual.value?e.by===null?p.virtual.value.options.indexOf(u):p.virtual.value.options.findIndex(f=>p.compare(f,u)):a.value.findIndex(f=>p.compare(f.dataRef.value,u))},defaultValue:M(()=>e.defaultValue),nullable:A,immediate:M(()=>!1),virtual:M(()=>null),inputRef:r,labelRef:l,buttonRef:o,optionsRef:c,disabled:M(()=>e.disabled),options:a,change(u){C(u)},activeOptionIndex:M(()=>{if(b.value&&h.value===null&&(p.virtual.value?p.virtual.value.options.length>0:a.value.length>0)){if(p.virtual.value){let f=p.virtual.value.options.findIndex(m=>{var g;return!((g=p.virtual.value)!=null&&g.disabled(m))});if(f!==-1)return f}let u=a.value.findIndex(f=>!f.dataRef.disabled);if(u!==-1)return u}return h.value}),activationTrigger:v,optionsPropsRef:d,closeCombobox(){b.value=!1,!e.disabled&&s.value!==1&&(s.value=1,h.value=null)},openCombobox(){if(b.value=!0,!e.disabled&&s.value!==0){if(p.value.value){let u=p.calculateIndex(p.value.value);u!==-1&&(h.value=u)}s.value=0}},setActivationTrigger(u){v.value=u},goToOption(u,f,m){b.value=!1,y!==null&&cancelAnimationFrame(y),y=requestAnimationFrame(()=>{if(e.disabled||c.value&&!d.value.static&&s.value===1)return;if(p.virtual.value){h.value=u===D.Specific?f:Ue({focus:u},{resolveItems:()=>p.virtual.value.options,resolveActiveIndex:()=>{var T,N;return(N=(T=p.activeOptionIndex.value)!=null?T:p.virtual.value.options.findIndex(Y=>{var B;return!((B=p.virtual.value)!=null&&B.disabled(Y))}))!=null?N:null},resolveDisabled:T=>p.virtual.value.disabled(T),resolveId(){throw new Error("Function not implemented.")}}),v.value=m??2;return}let g=O();if(g.activeOptionIndex===null){let T=g.options.findIndex(N=>!N.dataRef.disabled);T!==-1&&(g.activeOptionIndex=T)}let x=u===D.Specific?f:Ue({focus:u},{resolveItems:()=>g.options,resolveActiveIndex:()=>g.activeOptionIndex,resolveId:T=>T.id,resolveDisabled:T=>T.dataRef.disabled});h.value=x,v.value=m??2,a.value=g.options})},selectOption(u){let f=a.value.find(g=>g.id===u);if(!f)return;let{dataRef:m}=f;R(m.value)},selectActiveOption(){if(p.activeOptionIndex.value!==null){if(p.virtual.value)R(p.virtual.value.options[p.activeOptionIndex.value]);else{let{dataRef:u}=a.value[p.activeOptionIndex.value];R(u.value)}p.goToOption(D.Specific,p.activeOptionIndex.value)}},registerOption(u,f){let m=At({id:u,dataRef:f});if(p.virtual.value){a.value.push(m);return}$&&cancelAnimationFrame($);let g=O(x=>(x.push(m),x));h.value===null&&p.isSelected(f.value.value)&&(g.activeOptionIndex=g.options.indexOf(m)),a.value=g.options,h.value=g.activeOptionIndex,v.value=2,g.options.some(x=>!z(x.dataRef.domRef))&&($=requestAnimationFrame(()=>{let x=O();a.value=x.options,h.value=x.activeOptionIndex}))},unregisterOption(u,f){if(y!==null&&cancelAnimationFrame(y),f&&(b.value=!0),p.virtual.value){a.value=a.value.filter(g=>g.id!==u);return}let m=O(g=>{let x=g.findIndex(T=>T.id===u);return x!==-1&&g.splice(x,1),g});a.value=m.options,h.value=m.activeOptionIndex,v.value=2},isSelected(u){return re(E.value,{0:()=>p.compare(Z(p.value.value),Z(u)),1:()=>Z(p.value.value).some(f=>p.compare(Z(f),Z(u)))})},isActive(u){return h.value===p.calculateIndex(u)}};_t([r,o,c],()=>p.closeCombobox(),M(()=>s.value===0)),Xe(vt,p),Pt(M(()=>re(s.value,{0:be.Open,1:be.Closed})));let k=M(()=>{var u;return(u=z(r))==null?void 0:u.closest("form")});return pe(()=>{G([k],()=>{if(!k.value||e.defaultValue===void 0)return;function u(){p.change(e.defaultValue)}return k.value.addEventListener("reset",u),()=>{var f;(f=k.value)==null||f.removeEventListener("reset",u)}},{immediate:!0})}),()=>{var u,f,m;let{name:g,disabled:x,form:T,...N}=e,Y={open:s.value===0,disabled:x,activeIndex:p.activeOptionIndex.value,activeOption:p.activeOptionIndex.value===null?null:p.virtual.value?p.virtual.value.options[(u=p.activeOptionIndex.value)!=null?u:0]:(m=(f=p.options.value[p.activeOptionIndex.value])==null?void 0:f.dataRef.value)!=null?m:null,value:_.value};return ye(xe,[...g!=null&&_.value!=null?ht({[g]:_.value}).map(([B,J])=>ye(Ft,Lt({features:zt.Hidden,key:B,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:T,name:B,value:J}))):[],Me({theirProps:{...t,...Le(N,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:Y,slots:n,attrs:t,name:"Combobox"})])}}}),Tn=ne({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:e=>!0},setup(e,{emit:n,attrs:t,slots:i,expose:s}){var l;let r=(l=e.id)!=null?l:`headlessui-combobox-input-${ze()}`,o=ve("ComboboxInput"),c=M(()=>Je(z(o.inputRef))),d={value:!1};s({el:o.inputRef,$el:o.inputRef});function a(){o.change(null);let y=z(o.optionsRef);y&&(y.scrollTop=0),o.goToOption(D.Nothing)}let h=M(()=>{var y;let $=o.value.value;return z(o.inputRef)?typeof e.displayValue<"u"&&$!==void 0?(y=e.displayValue($))!=null?y:"":typeof $=="string"?$:"":""});pe(()=>{G([h,o.comboboxState,c],([y,$],[R,S])=>{if(d.value)return;let p=z(o.inputRef);p&&((S===0&&$===1||y!==R)&&(p.value=y),requestAnimationFrame(()=>{var k;if(d.value||!p||((k=c.value)==null?void 0:k.activeElement)!==p)return;let{selectionStart:u,selectionEnd:f}=p;Math.abs((f??0)-(u??0))===0&&u===0&&p.setSelectionRange(p.value.length,p.value.length)}))},{immediate:!0}),G([o.comboboxState],([y],[$])=>{if(y===0&&$===1){if(d.value)return;let R=z(o.inputRef);if(!R)return;let S=R.value,{selectionStart:p,selectionEnd:k,selectionDirection:u}=R;R.value="",R.value=S,u!==null?R.setSelectionRange(p,k,u):R.setSelectionRange(p,k)}})});let v=L(!1);function b(){v.value=!0}function O(){De().nextFrame(()=>{v.value=!1})}function E(y){switch(d.value=!0,y.key){case X.Enter:if(d.value=!1,o.comboboxState.value!==0||v.value)return;if(y.preventDefault(),y.stopPropagation(),o.activeOptionIndex.value===null){o.closeCombobox();return}o.selectActiveOption(),o.mode.value===0&&o.closeCombobox();break;case X.ArrowDown:return d.value=!1,y.preventDefault(),y.stopPropagation(),re(o.comboboxState.value,{0:()=>o.goToOption(D.Next),1:()=>o.openCombobox()});case X.ArrowUp:return d.value=!1,y.preventDefault(),y.stopPropagation(),re(o.comboboxState.value,{0:()=>o.goToOption(D.Previous),1:()=>{o.openCombobox(),Ze(()=>{o.value.value||o.goToOption(D.Last)})}});case X.Home:if(y.shiftKey)break;return d.value=!1,y.preventDefault(),y.stopPropagation(),o.goToOption(D.First);case X.PageUp:return d.value=!1,y.preventDefault(),y.stopPropagation(),o.goToOption(D.First);case X.End:if(y.shiftKey)break;return d.value=!1,y.preventDefault(),y.stopPropagation(),o.goToOption(D.Last);case X.PageDown:return d.value=!1,y.preventDefault(),y.stopPropagation(),o.goToOption(D.Last);case X.Escape:if(d.value=!1,o.comboboxState.value!==0)return;y.preventDefault(),o.optionsRef.value&&!o.optionsPropsRef.value.static&&y.stopPropagation(),o.nullable.value&&o.mode.value===0&&o.value.value===null&&a(),o.closeCombobox();break;case X.Tab:if(d.value=!1,o.comboboxState.value!==0)return;o.mode.value===0&&o.activationTrigger.value!==1&&o.selectActiveOption(),o.closeCombobox();break}}function A(y){n("change",y),o.nullable.value&&o.mode.value===0&&y.target.value===""&&a(),o.openCombobox()}function I(y){var $,R,S;let p=($=y.relatedTarget)!=null?$:je.find(k=>k!==y.currentTarget);if(d.value=!1,!((R=z(o.optionsRef))!=null&&R.contains(p))&&!((S=z(o.buttonRef))!=null&&S.contains(p))&&o.comboboxState.value===0)return y.preventDefault(),o.mode.value===0&&(o.nullable.value&&o.value.value===null?a():o.activationTrigger.value!==1&&o.selectActiveOption()),o.closeCombobox()}function C(y){var $,R,S;let p=($=y.relatedTarget)!=null?$:je.find(k=>k!==y.currentTarget);(R=z(o.buttonRef))!=null&&R.contains(p)||(S=z(o.optionsRef))!=null&&S.contains(p)||o.disabled.value||o.immediate.value&&o.comboboxState.value!==0&&(o.openCombobox(),De().nextFrame(()=>{o.setActivationTrigger(1)}))}let _=M(()=>{var y,$,R,S;return(S=(R=($=e.defaultValue)!=null?$:o.defaultValue.value!==void 0?(y=e.displayValue)==null?void 0:y.call(e,o.defaultValue.value):null)!=null?R:o.defaultValue.value)!=null?S:""});return()=>{var y,$,R,S,p,k,u;let f={open:o.comboboxState.value===0},{displayValue:m,onChange:g,...x}=e,T={"aria-controls":(y=o.optionsRef.value)==null?void 0:y.id,"aria-expanded":o.comboboxState.value===0,"aria-activedescendant":o.activeOptionIndex.value===null?void 0:o.virtual.value?($=o.options.value.find(N=>!o.virtual.value.disabled(N.dataRef.value)&&o.compare(N.dataRef.value,o.virtual.value.options[o.activeOptionIndex.value])))==null?void 0:$.id:(R=o.options.value[o.activeOptionIndex.value])==null?void 0:R.id,"aria-labelledby":(k=(S=z(o.labelRef))==null?void 0:S.id)!=null?k:(p=z(o.buttonRef))==null?void 0:p.id,"aria-autocomplete":"list",id:r,onCompositionstart:b,onCompositionend:O,onKeydown:E,onInput:A,onFocus:C,onBlur:I,role:"combobox",type:(u=t.type)!=null?u:"text",tabIndex:0,ref:o.inputRef,defaultValue:_.value,disabled:o.disabled.value===!0?!0:void 0};return Me({ourProps:T,theirProps:x,slot:f,attrs:t,slots:i,features:Se.RenderStrategy|Se.Static,name:"ComboboxInput"})}}}),$n=ne({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:n,slots:t,expose:i}){let s=ve("ComboboxOptions"),l=`headlessui-combobox-options-${ze()}`;i({el:s.optionsRef,$el:s.optionsRef}),fe(()=>{s.optionsPropsRef.value.static=e.static}),fe(()=>{s.optionsPropsRef.value.hold=e.hold});let r=Nt(),o=M(()=>r!==null?(r.value&be.Open)===be.Open:s.comboboxState.value===0);return Sn({container:M(()=>z(s.optionsRef)),enabled:M(()=>s.comboboxState.value===0),accept(c){return c.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:c.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(c){c.setAttribute("role","none")}}),()=>{var c,d,a;let h={open:s.comboboxState.value===0},v={"aria-labelledby":(a=(c=z(s.labelRef))==null?void 0:c.id)!=null?a:(d=z(s.buttonRef))==null?void 0:d.id,id:l,ref:s.optionsRef,role:"listbox","aria-multiselectable":s.mode.value===1?!0:void 0},b=Le(e,["hold"]);return Me({ourProps:v,theirProps:b,slot:h,attrs:n,slots:s.virtual.value&&s.comboboxState.value===0?{...t,default:()=>[ye(Cn,{},t.default)]}:t,features:Se.RenderStrategy|Se.Static,visible:o.value,name:"ComboboxOptions"})}}}),An=ne({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:n,attrs:t,expose:i}){let s=ve("ComboboxOption"),l=`headlessui-combobox-option-${ze()}`,r=L(null);i({el:r,$el:r});let o=M(()=>{var I;return s.virtual.value?s.activeOptionIndex.value===s.calculateIndex(e.value):s.activeOptionIndex.value===null?!1:((I=s.options.value[s.activeOptionIndex.value])==null?void 0:I.id)===l}),c=M(()=>s.isSelected(e.value)),d=Qe(mt,null),a=M(()=>({disabled:e.disabled,value:e.value,domRef:r,order:M(()=>e.order)}));pe(()=>s.registerOption(l,a)),jt(()=>s.unregisterOption(l,o.value)),fe(()=>{let I=z(r);I&&(d==null||d.value.measureElement(I))}),fe(()=>{s.comboboxState.value===0&&o.value&&(s.virtual.value||s.activationTrigger.value!==0&&Ze(()=>{var I,C;return(C=(I=z(r))==null?void 0:I.scrollIntoView)==null?void 0:C.call(I,{block:"nearest"})}))});function h(I){var C;if(e.disabled||(C=s.virtual.value)!=null&&C.disabled(e.value))return I.preventDefault();s.selectOption(l),Vt()||requestAnimationFrame(()=>{var _;return(_=z(s.inputRef))==null?void 0:_.focus({preventScroll:!0})}),s.mode.value===0&&requestAnimationFrame(()=>s.closeCombobox())}function v(){var I;if(e.disabled||(I=s.virtual.value)!=null&&I.disabled(e.value))return s.goToOption(D.Nothing);let C=s.calculateIndex(e.value);s.goToOption(D.Specific,C)}let b=xn();function O(I){b.update(I)}function E(I){var C;if(!b.wasMoved(I)||e.disabled||(C=s.virtual.value)!=null&&C.disabled(e.value)||o.value)return;let _=s.calculateIndex(e.value);s.goToOption(D.Specific,_,0)}function A(I){var C;b.wasMoved(I)&&(e.disabled||(C=s.virtual.value)!=null&&C.disabled(e.value)||o.value&&(s.optionsPropsRef.value.hold||s.goToOption(D.Nothing)))}return()=>{let{disabled:I}=e,C={active:o.value,selected:c.value,disabled:I},_={id:l,ref:r,role:"option",tabIndex:I===!0?void 0:-1,"aria-disabled":I===!0?!0:void 0,"aria-selected":c.value,disabled:void 0,onClick:h,onFocus:v,onPointerenter:O,onMouseenter:O,onPointermove:E,onMousemove:E,onPointerleave:A,onMouseleave:A},y=Le(e,["order","value"]);return Me({ourProps:_,theirProps:y,slot:C,attrs:t,slots:n,name:"ComboboxOption"})}}});const _n={wrapper:"flex flex-col flex-1 min-h-0 divide-y divide-gray-100 dark:divide-gray-800",container:"relative flex-1 overflow-y-auto divide-y divide-gray-100 dark:divide-gray-800 scroll-py-2",input:{wrapper:"relative flex items-center",base:"w-full placeholder-gray-400 dark:placeholder-gray-500 bg-transparent border-0 text-gray-900 dark:text-white focus:ring-0 focus:outline-none",padding:"px-4",height:"h-12",size:"sm:text-sm",icon:{base:"pointer-events-none absolute start-4 text-gray-400 dark:text-gray-500",loading:"animate-spin",size:"h-5 w-5",padding:"ps-11"},closeButton:{base:"absolute end-4",padding:"pe-10"}},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",queryLabel:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},group:{wrapper:"p-2",label:"px-2.5 my-2 text-xs font-semibold text-gray-900 dark:text-white",container:"text-sm text-gray-700 dark:text-gray-200",command:{base:"flex justify-between select-none items-center rounded-md px-2.5 py-1.5 gap-2 relative",active:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactive:"",label:"flex items-center gap-1.5 min-w-0",prefix:"text-gray-400 dark:text-gray-500",suffix:"text-gray-400 dark:text-gray-500",container:"flex items-center gap-1.5 min-w-0",icon:{base:"flex-shrink-0 w-5 h-5",active:"text-gray-900 dark:text-white",inactive:"text-gray-400 dark:text-gray-500"},selectedIcon:{base:"h-5 w-5 text-gray-900 dark:text-white flex-shrink-0"},avatar:{base:"flex-shrink-0",size:"2xs"},chip:{base:"flex-shrink-0 w-2 h-2 mx-1 rounded-full"},disabled:"opacity-50",shortcuts:"hidden md:inline-flex flex-shrink-0 gap-0.5"},active:"flex-shrink-0 text-gray-500 dark:text-gray-400",inactive:"flex-shrink-0 text-gray-500 dark:text-gray-400"},default:{icon:"i-heroicons-magnifying-glass-20-solid",loadingIcon:"i-heroicons-arrow-path-20-solid",emptyState:{icon:"i-heroicons-magnifying-glass-20-solid",label:"We couldn't find any items.",queryLabel:"We couldn't find any items with that term. Please try again."},closeButton:null,selectedIcon:"i-heroicons-check-20-solid"}};function Q(e){return Array.isArray?Array.isArray(e):yt(e)==="[object Array]"}const Pn=1/0;function Fn(e){if(typeof e=="string")return e;let n=e+"";return n=="0"&&1/e==-Pn?"-0":n}function Ln(e){return e==null?"":Fn(e)}function q(e){return typeof e=="string"}function gt(e){return typeof e=="number"}function zn(e){return e===!0||e===!1||Nn(e)&&yt(e)=="[object Boolean]"}function bt(e){return typeof e=="object"}function Nn(e){return bt(e)&&e!==null}function V(e){return e!=null}function Ce(e){return!e.trim().length}function yt(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Bn="Incorrect 'index' type",Dn=e=>`Invalid value for key ${e}`,jn=e=>`Pattern length exceeds max of ${e}.`,Vn=e=>`Missing ${e} property in key`,Kn=e=>`Property 'weight' in key '${e}' must be a positive integer`,He=Object.prototype.hasOwnProperty;class Un{constructor(n){this._keys=[],this._keyMap={};let t=0;n.forEach(i=>{let s=xt(i);t+=s.weight,this._keys.push(s),this._keyMap[s.id]=s,t+=s.weight}),this._keys.forEach(i=>{i.weight/=t})}get(n){return this._keyMap[n]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function xt(e){let n=null,t=null,i=null,s=1,l=null;if(q(e)||Q(e))i=e,n=We(e),t=Te(e);else{if(!He.call(e,"name"))throw new Error(Vn("name"));const r=e.name;if(i=r,He.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(Kn(r));n=We(r),t=Te(r),l=e.getFn}return{path:n,id:t,weight:s,src:i,getFn:l}}function We(e){return Q(e)?e:e.split(".")}function Te(e){return Q(e)?e.join("."):e}function Hn(e,n){let t=[],i=!1;const s=(l,r,o)=>{if(V(l))if(!r[o])t.push(l);else{let c=r[o];const d=l[c];if(!V(d))return;if(o===r.length-1&&(q(d)||gt(d)||zn(d)))t.push(Ln(d));else if(Q(d)){i=!0;for(let a=0,h=d.length;a<h;a+=1)s(d[a],r,o+1)}else r.length&&s(d,r,o+1)}};return s(e,q(n)?n.split("."):n,0),i?t:t[0]}const Wn={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},qn={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,n)=>e.score===n.score?e.idx<n.idx?-1:1:e.score<n.score?-1:1},Gn={location:0,threshold:.6,distance:100},Yn={useExtendedSearch:!1,getFn:Hn,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var w={...qn,...Wn,...Gn,...Yn};const Jn=/[^ ]+/g;function Xn(e=1,n=3){const t=new Map,i=Math.pow(10,n);return{get(s){const l=s.match(Jn).length;if(t.has(l))return t.get(l);const r=1/Math.pow(l,.5*e),o=parseFloat(Math.round(r*i)/i);return t.set(l,o),o},clear(){t.clear()}}}class Ne{constructor({getFn:n=w.getFn,fieldNormWeight:t=w.fieldNormWeight}={}){this.norm=Xn(t,3),this.getFn=n,this.isCreated=!1,this.setIndexRecords()}setSources(n=[]){this.docs=n}setIndexRecords(n=[]){this.records=n}setKeys(n=[]){this.keys=n,this._keysMap={},n.forEach((t,i)=>{this._keysMap[t.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,q(this.docs[0])?this.docs.forEach((n,t)=>{this._addString(n,t)}):this.docs.forEach((n,t)=>{this._addObject(n,t)}),this.norm.clear())}add(n){const t=this.size();q(n)?this._addString(n,t):this._addObject(n,t)}removeAt(n){this.records.splice(n,1);for(let t=n,i=this.size();t<i;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(n,t){return n[this._keysMap[t]]}size(){return this.records.length}_addString(n,t){if(!V(n)||Ce(n))return;let i={v:n,i:t,n:this.norm.get(n)};this.records.push(i)}_addObject(n,t){let i={i:t,$:{}};this.keys.forEach((s,l)=>{let r=s.getFn?s.getFn(n):this.getFn(n,s.path);if(V(r)){if(Q(r)){let o=[];const c=[{nestedArrIndex:-1,value:r}];for(;c.length;){const{nestedArrIndex:d,value:a}=c.pop();if(V(a))if(q(a)&&!Ce(a)){let h={v:a,i:d,n:this.norm.get(a)};o.push(h)}else Q(a)&&a.forEach((h,v)=>{c.push({nestedArrIndex:v,value:h})})}i.$[l]=o}else if(q(r)&&!Ce(r)){let o={v:r,n:this.norm.get(r)};i.$[l]=o}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function St(e,n,{getFn:t=w.getFn,fieldNormWeight:i=w.fieldNormWeight}={}){const s=new Ne({getFn:t,fieldNormWeight:i});return s.setKeys(e.map(xt)),s.setSources(n),s.create(),s}function Qn(e,{getFn:n=w.getFn,fieldNormWeight:t=w.fieldNormWeight}={}){const{keys:i,records:s}=e,l=new Ne({getFn:n,fieldNormWeight:t});return l.setKeys(i),l.setIndexRecords(s),l}function ge(e,{errors:n=0,currentLocation:t=0,expectedLocation:i=0,distance:s=w.distance,ignoreLocation:l=w.ignoreLocation}={}){const r=n/e.length;if(l)return r;const o=Math.abs(i-t);return s?r+o/s:o?1:r}function Zn(e=[],n=w.minMatchCharLength){let t=[],i=-1,s=-1,l=0;for(let r=e.length;l<r;l+=1){let o=e[l];o&&i===-1?i=l:!o&&i!==-1&&(s=l-1,s-i+1>=n&&t.push([i,s]),i=-1)}return e[l-1]&&l-i>=n&&t.push([i,l-1]),t}const ie=32;function es(e,n,t,{location:i=w.location,distance:s=w.distance,threshold:l=w.threshold,findAllMatches:r=w.findAllMatches,minMatchCharLength:o=w.minMatchCharLength,includeMatches:c=w.includeMatches,ignoreLocation:d=w.ignoreLocation}={}){if(n.length>ie)throw new Error(jn(ie));const a=n.length,h=e.length,v=Math.max(0,Math.min(i,h));let b=l,O=v;const E=o>1||c,A=E?Array(h):[];let I;for(;(I=e.indexOf(n,O))>-1;){let S=ge(n,{currentLocation:I,expectedLocation:v,distance:s,ignoreLocation:d});if(b=Math.min(S,b),O=I+a,E){let p=0;for(;p<a;)A[I+p]=1,p+=1}}O=-1;let C=[],_=1,y=a+h;const $=1<<a-1;for(let S=0;S<a;S+=1){let p=0,k=y;for(;p<k;)ge(n,{errors:S,currentLocation:v+k,expectedLocation:v,distance:s,ignoreLocation:d})<=b?p=k:y=k,k=Math.floor((y-p)/2+p);y=k;let u=Math.max(1,v-k+1),f=r?h:Math.min(v+k,h)+a,m=Array(f+2);m[f+1]=(1<<S)-1;for(let x=f;x>=u;x-=1){let T=x-1,N=t[e.charAt(T)];if(E&&(A[T]=+!!N),m[x]=(m[x+1]<<1|1)&N,S&&(m[x]|=(C[x+1]|C[x])<<1|1|C[x+1]),m[x]&$&&(_=ge(n,{errors:S,currentLocation:T,expectedLocation:v,distance:s,ignoreLocation:d}),_<=b)){if(b=_,O=T,O<=v)break;u=Math.max(1,2*v-O)}}if(ge(n,{errors:S+1,currentLocation:v,expectedLocation:v,distance:s,ignoreLocation:d})>b)break;C=m}const R={isMatch:O>=0,score:Math.max(.001,_)};if(E){const S=Zn(A,o);S.length?c&&(R.indices=S):R.isMatch=!1}return R}function ts(e){let n={};for(let t=0,i=e.length;t<i;t+=1){const s=e.charAt(t);n[s]=(n[s]||0)|1<<i-t-1}return n}class It{constructor(n,{location:t=w.location,threshold:i=w.threshold,distance:s=w.distance,includeMatches:l=w.includeMatches,findAllMatches:r=w.findAllMatches,minMatchCharLength:o=w.minMatchCharLength,isCaseSensitive:c=w.isCaseSensitive,ignoreLocation:d=w.ignoreLocation}={}){if(this.options={location:t,threshold:i,distance:s,includeMatches:l,findAllMatches:r,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:d},this.pattern=c?n:n.toLowerCase(),this.chunks=[],!this.pattern.length)return;const a=(v,b)=>{this.chunks.push({pattern:v,alphabet:ts(v),startIndex:b})},h=this.pattern.length;if(h>ie){let v=0;const b=h%ie,O=h-b;for(;v<O;)a(this.pattern.substr(v,ie),v),v+=ie;if(b){const E=h-ie;a(this.pattern.substr(E),E)}}else a(this.pattern,0)}searchIn(n){const{isCaseSensitive:t,includeMatches:i}=this.options;if(t||(n=n.toLowerCase()),this.pattern===n){let O={isMatch:!0,score:0};return i&&(O.indices=[[0,n.length-1]]),O}const{location:s,distance:l,threshold:r,findAllMatches:o,minMatchCharLength:c,ignoreLocation:d}=this.options;let a=[],h=0,v=!1;this.chunks.forEach(({pattern:O,alphabet:E,startIndex:A})=>{const{isMatch:I,score:C,indices:_}=es(n,O,E,{location:s+A,distance:l,threshold:r,findAllMatches:o,minMatchCharLength:c,includeMatches:i,ignoreLocation:d});I&&(v=!0),h+=C,I&&_&&(a=[...a,..._])});let b={isMatch:v,score:v?h/this.chunks.length:1};return v&&i&&(b.indices=a),b}}class se{constructor(n){this.pattern=n}static isMultiMatch(n){return qe(n,this.multiRegex)}static isSingleMatch(n){return qe(n,this.singleRegex)}search(){}}function qe(e,n){const t=e.match(n);return t?t[1]:null}class ns extends se{constructor(n){super(n)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(n){const t=n===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class ss extends se{constructor(n){super(n)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(n){const i=n.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,n.length-1]}}}class is extends se{constructor(n){super(n)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(n){const t=n.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class os extends se{constructor(n){super(n)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(n){const t=!n.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,n.length-1]}}}class ls extends se{constructor(n){super(n)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(n){const t=n.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[n.length-this.pattern.length,n.length-1]}}}class rs extends se{constructor(n){super(n)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(n){const t=!n.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,n.length-1]}}}class Ot extends se{constructor(n,{location:t=w.location,threshold:i=w.threshold,distance:s=w.distance,includeMatches:l=w.includeMatches,findAllMatches:r=w.findAllMatches,minMatchCharLength:o=w.minMatchCharLength,isCaseSensitive:c=w.isCaseSensitive,ignoreLocation:d=w.ignoreLocation}={}){super(n),this._bitapSearch=new It(n,{location:t,threshold:i,distance:s,includeMatches:l,findAllMatches:r,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(n){return this._bitapSearch.searchIn(n)}}class wt extends se{constructor(n){super(n)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(n){let t=0,i;const s=[],l=this.pattern.length;for(;(i=n.indexOf(this.pattern,t))>-1;)t=i+l,s.push([i,t-1]);const r=!!s.length;return{isMatch:r,score:r?0:1,indices:s}}}const $e=[ns,wt,is,os,rs,ls,ss,Ot],Ge=$e.length,as=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,us="|";function cs(e,n={}){return e.split(us).map(t=>{let i=t.trim().split(as).filter(l=>l&&!!l.trim()),s=[];for(let l=0,r=i.length;l<r;l+=1){const o=i[l];let c=!1,d=-1;for(;!c&&++d<Ge;){const a=$e[d];let h=a.isMultiMatch(o);h&&(s.push(new a(h,n)),c=!0)}if(!c)for(d=-1;++d<Ge;){const a=$e[d];let h=a.isSingleMatch(o);if(h){s.push(new a(h,n));break}}}return s})}const ds=new Set([Ot.type,wt.type]);class hs{constructor(n,{isCaseSensitive:t=w.isCaseSensitive,includeMatches:i=w.includeMatches,minMatchCharLength:s=w.minMatchCharLength,ignoreLocation:l=w.ignoreLocation,findAllMatches:r=w.findAllMatches,location:o=w.location,threshold:c=w.threshold,distance:d=w.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:i,minMatchCharLength:s,findAllMatches:r,ignoreLocation:l,location:o,threshold:c,distance:d},this.pattern=t?n:n.toLowerCase(),this.query=cs(this.pattern,this.options)}static condition(n,t){return t.useExtendedSearch}searchIn(n){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:s}=this.options;n=s?n:n.toLowerCase();let l=0,r=[],o=0;for(let c=0,d=t.length;c<d;c+=1){const a=t[c];r.length=0,l=0;for(let h=0,v=a.length;h<v;h+=1){const b=a[h],{isMatch:O,indices:E,score:A}=b.search(n);if(O){if(l+=1,o+=A,i){const I=b.constructor.type;ds.has(I)?r=[...r,...E]:r.push(E)}}else{o=0,l=0,r.length=0;break}}if(l){let h={isMatch:!0,score:o/l};return i&&(h.indices=r),h}}return{isMatch:!1,score:1}}}const Ae=[];function fs(...e){Ae.push(...e)}function _e(e,n){for(let t=0,i=Ae.length;t<i;t+=1){let s=Ae[t];if(s.condition(e,n))return new s(e,n)}return new It(e,n)}const we={AND:"$and",OR:"$or"},Pe={PATH:"$path",PATTERN:"$val"},Fe=e=>!!(e[we.AND]||e[we.OR]),ps=e=>!!e[Pe.PATH],vs=e=>!Q(e)&&bt(e)&&!Fe(e),Ye=e=>({[we.AND]:Object.keys(e).map(n=>({[n]:e[n]}))});function Mt(e,n,{auto:t=!0}={}){const i=s=>{let l=Object.keys(s);const r=ps(s);if(!r&&l.length>1&&!Fe(s))return i(Ye(s));if(vs(s)){const c=r?s[Pe.PATH]:l[0],d=r?s[Pe.PATTERN]:s[c];if(!q(d))throw new Error(Dn(c));const a={keyId:Te(c),pattern:d};return t&&(a.searcher=_e(d,n)),a}let o={children:[],operator:l[0]};return l.forEach(c=>{const d=s[c];Q(d)&&d.forEach(a=>{o.children.push(i(a))})}),o};return Fe(e)||(e=Ye(e)),i(e)}function ms(e,{ignoreFieldNorm:n=w.ignoreFieldNorm}){e.forEach(t=>{let i=1;t.matches.forEach(({key:s,norm:l,score:r})=>{const o=s?s.weight:null;i*=Math.pow(r===0&&o?Number.EPSILON:r,(o||1)*(n?1:l))}),t.score=i})}function gs(e,n){const t=e.matches;n.matches=[],V(t)&&t.forEach(i=>{if(!V(i.indices)||!i.indices.length)return;const{indices:s,value:l}=i;let r={indices:s,value:l};i.key&&(r.key=i.key.src),i.idx>-1&&(r.refIndex=i.idx),n.matches.push(r)})}function bs(e,n){n.score=e.score}function ys(e,n,{includeMatches:t=w.includeMatches,includeScore:i=w.includeScore}={}){const s=[];return t&&s.push(gs),i&&s.push(bs),e.map(l=>{const{idx:r}=l,o={item:n[r],refIndex:r};return s.length&&s.forEach(c=>{c(l,o)}),o})}class ce{constructor(n,t={},i){this.options={...w,...t},this.options.useExtendedSearch,this._keyStore=new Un(this.options.keys),this.setCollection(n,i)}setCollection(n,t){if(this._docs=n,t&&!(t instanceof Ne))throw new Error(Bn);this._myIndex=t||St(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(n){V(n)&&(this._docs.push(n),this._myIndex.add(n))}remove(n=()=>!1){const t=[];for(let i=0,s=this._docs.length;i<s;i+=1){const l=this._docs[i];n(l,i)&&(this.removeAt(i),i-=1,s-=1,t.push(l))}return t}removeAt(n){this._docs.splice(n,1),this._myIndex.removeAt(n)}getIndex(){return this._myIndex}search(n,{limit:t=-1}={}){const{includeMatches:i,includeScore:s,shouldSort:l,sortFn:r,ignoreFieldNorm:o}=this.options;let c=q(n)?q(this._docs[0])?this._searchStringList(n):this._searchObjectList(n):this._searchLogical(n);return ms(c,{ignoreFieldNorm:o}),l&&c.sort(r),gt(t)&&t>-1&&(c=c.slice(0,t)),ys(c,this._docs,{includeMatches:i,includeScore:s})}_searchStringList(n){const t=_e(n,this.options),{records:i}=this._myIndex,s=[];return i.forEach(({v:l,i:r,n:o})=>{if(!V(l))return;const{isMatch:c,score:d,indices:a}=t.searchIn(l);c&&s.push({item:l,idx:r,matches:[{score:d,value:l,norm:o,indices:a}]})}),s}_searchLogical(n){const t=Mt(n,this.options),i=(o,c,d)=>{if(!o.children){const{keyId:h,searcher:v}=o,b=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(c,h),searcher:v});return b&&b.length?[{idx:d,item:c,matches:b}]:[]}const a=[];for(let h=0,v=o.children.length;h<v;h+=1){const b=o.children[h],O=i(b,c,d);if(O.length)a.push(...O);else if(o.operator===we.AND)return[]}return a},s=this._myIndex.records,l={},r=[];return s.forEach(({$:o,i:c})=>{if(V(o)){let d=i(t,o,c);d.length&&(l[c]||(l[c]={idx:c,item:o,matches:[]},r.push(l[c])),d.forEach(({matches:a})=>{l[c].matches.push(...a)}))}}),r}_searchObjectList(n){const t=_e(n,this.options),{keys:i,records:s}=this._myIndex,l=[];return s.forEach(({$:r,i:o})=>{if(!V(r))return;let c=[];i.forEach((d,a)=>{c.push(...this._findMatches({key:d,value:r[a],searcher:t}))}),c.length&&l.push({idx:o,item:r,matches:c})}),l}_findMatches({key:n,value:t,searcher:i}){if(!V(t))return[];let s=[];if(Q(t))t.forEach(({v:l,i:r,n:o})=>{if(!V(l))return;const{isMatch:c,score:d,indices:a}=i.searchIn(l);c&&s.push({score:d,key:n,value:l,idx:r,norm:o,indices:a})});else{const{v:l,n:r}=t,{isMatch:o,score:c,indices:d}=i.searchIn(l);o&&s.push({score:c,key:n,value:l,norm:r,indices:d})}return s}}ce.version="6.6.2";ce.createIndex=St;ce.parseIndex=Qn;ce.config=w;ce.parseQuery=Mt;fs(hs);function xs(e,n,t){const i=()=>{var r,o;return new ce((r=H(n))!=null?r:[],(o=H(t))==null?void 0:o.fuseOptions)},s=L(i());G(()=>{var r;return(r=H(t))==null?void 0:r.fuseOptions},()=>{s.value=i()},{deep:!0}),G(()=>H(n),r=>{s.value.setCollection(r)},{deep:!0});const l=M(()=>{const r=H(t);if(r!=null&&r.matchAllWhenSearchEmpty&&!H(e))return H(n).map((c,d)=>({item:c,refIndex:d}));const o=r==null?void 0:r.resultLimit;return s.value.search(H(e),o?{limit:o}:void 0)});return{fuse:s,results:l}}const Ss=ne({components:{HComboboxOption:An,UIcon:Ee,UAvatar:tt,UKbd:nt},props:{group:{type:Object,required:!0},query:{type:String,default:""},groupAttribute:{type:String,required:!0},commandAttribute:{type:String,required:!0},selectedIcon:{type:String,required:!0},ui:{type:Object,required:!0}},setup(e){const n=M(()=>{const i=e.group[e.groupAttribute];return typeof i=="function"?i(e.query):i});function t(i,{indices:s,value:l}){if(i===l)return"";let r="",o=0;s.forEach(d=>{const a=d[1]+1,h=a-d[0]>=e.query.length;r+=[l.substring(o,d[0]),h&&"<mark>",l.substring(d[0],a),h&&"</mark>"].filter(Boolean).join(""),o=a}),r+=l.substring(o);const c=r.indexOf("<mark>");return c>60&&(r=`...${r.substring(c-60)}`),r}return st(()=>it("$xnpcKX55nb")),{label:n,highlight:t}}}),Is=["aria-label"],Os=["innerHTML"];function ws(e,n,t,i,s,l){const r=Ee,o=tt,c=nt,d=he("HComboboxOption");return P(),K("div",{class:F(e.ui.group.wrapper)},[e.label?(P(),K("h2",{key:0,class:F(e.ui.group.label)},ee(e.label),3)):W("",!0),te("div",{class:F(e.ui.group.container),"aria-label":e.group[e.groupAttribute]},[(P(!0),K(xe,null,Ie(e.group.commands,(a,h)=>(P(),U(d,{key:`${e.group.key}-${h}`,value:a,disabled:a.disabled,as:"template"},{default:ue(({active:v,selected:b})=>[te("div",{class:F([e.ui.group.command.base,v?e.ui.group.command.active:e.ui.group.command.inactive,a.disabled?"cursor-not-allowed":"cursor-pointer"])},[te("div",{class:F(e.ui.group.command.container)},[ae(e.$slots,`${e.group.key}-icon`,{group:e.group,command:a,active:v,selected:b},()=>[a.icon?(P(),U(r,{key:0,name:a.icon,class:F([e.ui.group.command.icon.base,v?e.ui.group.command.icon.active:e.ui.group.command.icon.inactive,a.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):a.avatar?(P(),U(o,Oe({key:1},{size:e.ui.group.command.avatar.size,...a.avatar},{class:e.ui.group.command.avatar.base,"aria-hidden":"true"}),null,16,["class"])):a.chip?(P(),K("span",{key:2,class:F(e.ui.group.command.chip.base),style:Kt({background:`#${a.chip}`})},null,6)):W("",!0)]),te("div",{class:F([e.ui.group.command.label,a.disabled&&e.ui.group.command.disabled])},[ae(e.$slots,`${e.group.key}-command`,{group:e.group,command:a,active:v,selected:b},()=>{var O,E;return[a.prefix?(P(),K("span",{key:0,class:F(["flex-shrink-0",a.prefixClass||e.ui.group.command.prefix])},ee(a.prefix),3)):W("",!0),te("span",{class:F(["truncate",{"flex-none":a.suffix||((O=a.matches)==null?void 0:O.length)}])},ee(a[e.commandAttribute]),3),(E=a.matches)!=null&&E.length?(P(),K("span",{key:1,class:F(["truncate",a.suffixClass||e.ui.group.command.suffix]),innerHTML:e.highlight(a[e.commandAttribute],a.matches[0])},null,10,Os)):a.suffix?(P(),K("span",{key:2,class:F(["truncate",a.suffixClass||e.ui.group.command.suffix])},ee(a.suffix),3)):W("",!0)]})],2)],2),b?(P(),U(r,{key:0,name:e.selectedIcon,class:F(e.ui.group.command.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])):v&&(e.group.active||e.$slots[`${e.group.key}-active`])?ae(e.$slots,`${e.group.key}-active`,{key:1,group:e.group,command:a,active:v,selected:b},()=>[e.group.active?(P(),K("span",{key:0,class:F(e.ui.group.active)},ee(e.group.active),3)):W("",!0)]):ae(e.$slots,`${e.group.key}-inactive`,{key:2,group:e.group,command:a,active:v,selected:b},()=>{var O;return[(O=a.shortcuts)!=null&&O.length?(P(),K("span",{key:0,class:F(e.ui.group.command.shortcuts)},[(P(!0),K(xe,null,Ie(a.shortcuts,E=>(P(),U(c,{key:E},{default:ue(()=>[Ut(ee(E),1)]),_:2},1024))),128))],2)):!a.disabled&&e.group.inactive?(P(),K("span",{key:1,class:F(e.ui.group.inactive)},ee(e.group.inactive),3)):W("",!0)]})],2)]),_:2},1032,["value","disabled"]))),128))],10,Is)],2)}const Ms=et(Ss,[["render",ws]]),le=Ht(Ve.ui.strategy,Ve.ui.commandPalette,_n),Es=ne({components:{HCombobox:Rn,HComboboxInput:Tn,HComboboxOptions:$n,UIcon:Ee,UButton:ot,CommandPaletteGroup:Ms},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:null},by:{type:String,default:"id"},multiple:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},groups:{type:Array,default:()=>[]},icon:{type:String,default:()=>le.default.icon},loadingIcon:{type:String,default:()=>le.default.loadingIcon},selectedIcon:{type:String,default:()=>le.default.selectedIcon},closeButton:{type:Object,default:()=>le.default.closeButton},emptyState:{type:Object,default:()=>le.default.emptyState},placeholder:{type:String,default:"Search..."},groupAttribute:{type:String,default:"label"},commandAttribute:{type:String,default:"label"},autoselect:{type:Boolean,default:!0},autoclear:{type:Boolean,default:!0},debounce:{type:Number,default:200},fuse:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close"],setup(e,{emit:n,expose:t}){const{ui:i,attrs:s}=lt("commandPalette",Re(e,"ui"),le,Re(e,"class")),l=L(""),r=L(),o=L(null),c=L(!1);pe(()=>{e.autoselect&&y()}),pe(()=>{setTimeout(()=>{var k;const S=(k=r.value)==null?void 0:k.$.provides;if(!S)return;const p=Object.getOwnPropertySymbols(S);o.value=p.length&&S[p[0]]},200)});const d=M(()=>rt({},e.fuse,{fuseOptions:{keys:[e.commandAttribute]},resultLimit:12,matchAllWhenSearchEmpty:!0})),a=M(()=>{var p;const S=[];for(const k of e.groups)k.search||S.push(...((p=k.commands)==null?void 0:p.map(u=>({...u,group:k.key})))||[]);return S}),h=L({}),{results:v}=xs(l,a,d);function b(S,p){if(S)return S.filter&&typeof S.filter=="function"&&(p=S.filter(l.value,p)),{...S,commands:p.slice(0,d.value.resultLimit)}}const O=M(()=>{if(!v.value)return[];const S=v.value.reduce((u,f)=>{var x;const{item:m,...g}=f;return m.group&&(u[x=m.group]||(u[x]=[]),u[m.group].push({...m,...g})),u},{}),p=Object.entries(S).map(([u,f])=>{const m=e.groups.find(g=>g.key===u);return m?b(m,f):null}).filter(Boolean),k=e.groups.filter(u=>{var f;return!!u.search&&((f=h.value[u.key])==null?void 0:f.length)}).map(u=>{const f=h.value[u.key]||[];return b(u,[...f])});return[...p,...k]}),E=at(async()=>{const S=e.groups.filter(p=>!!p.search);S.length&&(c.value=!0,await Promise.all(S.map(async p=>{h.value[p.key]=await p.search(l.value)})),c.value=!1,_())},e.debounce);G(l,()=>{E(),_()});const A=M(()=>(e.loading||c.value)&&e.loadingIcon?e.loadingIcon:e.icon),I=M(()=>Wt(i.value.input.icon.base,i.value.input.icon.size,(e.loading||c.value)&&e.loadingIcon&&i.value.input.icon.loading)),C=M(()=>({...i.value.default.emptyState,...e.emptyState}));function _(){setTimeout(()=>{var S;(S=r.value)==null||S.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))},0)}function y(){setTimeout(()=>{var S;(S=r.value)==null||S.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown"}))},0)}function $(S){n("update:modelValue",S,{query:l.value}),e.autoclear&&setTimeout(()=>{l.value=""},0)}function R(){l.value?l.value="":n("close")}return t({query:l,updateQuery:S=>{l.value=S},comboboxApi:o,results:v}),st(()=>it("$JhxQMScl9J")),{ui:i,attrs:s,groups:O,comboboxInput:r,query:l,iconName:A,iconClass:I,emptyState:C,onSelect:$,onClear:R}}});function ks(e,n,t,i,s,l){const r=Ee,o=he("HComboboxInput"),c=ot,d=he("CommandPaletteGroup"),a=he("HComboboxOptions"),h=he("HCombobox");return P(),U(h,Oe({by:e.by,"model-value":e.modelValue,multiple:e.multiple,nullable:e.nullable,class:e.ui.wrapper},e.attrs,{as:"div","onUpdate:modelValue":e.onSelect}),{default:ue(()=>[qt(te("div",{class:F(e.ui.input.wrapper)},[e.iconName?(P(),U(r,{key:0,name:e.iconName,class:F(e.iconClass),"aria-hidden":"true"},null,8,["name","class"])):W("",!0),ut(o,{ref:"comboboxInput",value:e.query,class:F([e.ui.input.base,e.ui.input.size,e.ui.input.height,e.ui.input.padding,e.icon&&e.ui.input.icon.padding,e.closeButton&&e.ui.input.closeButton.padding]),placeholder:e.placeholder,"aria-label":e.placeholder,autocomplete:"off",onChange:n[0]||(n[0]=v=>e.query=v.target.value)},null,8,["value","class","placeholder","aria-label"]),e.closeButton?(P(),U(c,Oe({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{class:e.ui.input.closeButton.base,onClick:e.onClear}),null,16,["class","onClick"])):W("",!0)],2),[[Gt,e.searchable]]),e.groups.length?(P(),U(a,{key:0,static:"",hold:"",as:"div","aria-label":"Commands",class:F(e.ui.container)},{default:ue(()=>[(P(!0),K(xe,null,Ie(e.groups,v=>(P(),U(d,{key:v.key,query:e.query,group:v,"group-attribute":e.groupAttribute,"command-attribute":e.commandAttribute,"selected-icon":e.selectedIcon,ui:e.ui},Yt({_:2},[Ie(e.$slots,(b,O)=>({name:O,fn:ue(E=>[ae(e.$slots,O,Jt(Xt(E)))])}))]),1032,["query","group","group-attribute","command-attribute","selected-icon","ui"]))),128))]),_:3},8,["class"])):e.emptyState?ae(e.$slots,"empty-state",{key:1},()=>[te("div",{class:F(e.ui.emptyState.wrapper)},[e.emptyState.icon?(P(),U(r,{key:0,name:e.emptyState.icon,class:F(e.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):W("",!0),te("p",{class:F(e.query?e.ui.emptyState.queryLabel:e.ui.emptyState.label)},ee(e.query?e.emptyState.queryLabel:e.emptyState.label),3)],2)]):W("",!0)]),_:3},16,["by","model-value","multiple","nullable","class","onUpdate:modelValue"])}const Cs=et(Es,[["render",ks]]),Et=e=>{if(!e.children)return e._path;for(const n of(e==null?void 0:e.children)||[]){const t=Et(n);if(t)return t}},kt=(e,n)=>{for(const t of n){if(t._path===e&&!t._id)return t.children;if(t.children){const i=kt(e,t.children);if(i)return i}}},Ct=(e,n)=>{for(const t of n){if(t._path===e)return t;if(t.children){const i=Ct(e,t.children);if(i)return i}}},Rs=(e,n,t)=>{let i;const s=(l,r)=>{for(const o of r)if(!(l!=="/"&&o._path==="/")){if(l!=null&&l.startsWith(o._path)&&o[n]&&(i=o[n]),o._path===l)return;o.children&&s(l,o.children)}};return s(e,t),i},Ts=()=>({navBottomLink:Et,navDirFromPath:kt,navPageFromPath:Ct,navKeyFromPath:Rs});function $s(...e){return M(()=>e.every(n=>H(n)))}function As(e){return M(()=>!H(e))}const _s=/^[^-]+.*-.*[^-]+$/,Ps=/^[^_]+.*_.*[^_]+$/,Fs=(e,n={})=>{const{macOS:t,usingInput:i}=ct();let s=[];const l=L([]),r=()=>{l.value.splice(0,l.value.length)},o=at(r,n.chainDelay??800),c=d=>{if(!d.key)return;const a=/^[a-z]{1}$/i.test(d.key);let h;if(l.value.push(d.key),l.value.length>=2){h=l.value.slice(-2).join("-");for(const v of s.filter(b=>b.chained))if(v.key===h){v.condition.value&&(d.preventDefault(),v.handler()),r();return}}for(const v of s.filter(b=>!b.chained))if(d.key.toLowerCase()===v.key&&d.metaKey===v.metaKey&&d.ctrlKey===v.ctrlKey&&!(a&&d.shiftKey!==v.shiftKey)){v.condition.value&&(d.preventDefault(),v.handler()),r();return}o()};s=Object.entries(e).map(([d,a])=>{var O,E;if(!a)return null;let h;d.includes("-")&&d!=="-"&&!((O=d.match(_s))!=null&&O.length)&&console.trace(`[Shortcut] Invalid key: "${d}"`),d.includes("_")&&d!=="_"&&!((E=d.match(Ps))!=null&&E.length)&&console.trace(`[Shortcut] Invalid key: "${d}"`);const v=d.includes("-")&&d!=="-";if(v)h={key:d.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const A=d.toLowerCase().split("_").map(I=>I);h={key:A.filter(I=>!["meta","ctrl","shift","alt"].includes(I)).join("_"),metaKey:A.includes("meta"),ctrlKey:A.includes("ctrl"),shiftKey:A.includes("shift"),altKey:A.includes("alt")}}if(h.chained=v,!t.value&&h.metaKey&&!h.ctrlKey&&(h.metaKey=!1,h.ctrlKey=!0),typeof a=="function"?h.handler=a:typeof a=="object"&&(h={...h,handler:a.handler}),!h.handler)return console.trace("[Shortcut] Invalid value"),null;const b=[];return a.usingInput?typeof a.usingInput=="string"&&b.push(M(()=>i.value===a.usingInput)):b.push(As(i)),h.condition=$s(...b,...a.whenever||[]),h}).filter(Boolean),Qt("keydown",c)},zs=ne({__name:"DocsSearch",props:{files:{type:Array,default:()=>[]},navigation:{type:Array,default:()=>[]},links:{type:Array,default:()=>[]},groups:{type:Array,default:()=>[]},fuse:{type:Object,default:()=>({})},hideColorMode:{type:Boolean,default:!1},ui:{type:Object,default:()=>({})}},setup(e,{expose:n}){const t={padding:"p-0 sm:p-4",rounded:"rounded-none sm:rounded-lg",width:"sm:max-w-3xl",height:"h-screen sm:h-[28rem]",commandPalette:{input:{height:"h-[--header-height] sm:h-12",icon:{size:"h-5 w-5",padding:"ps-11"}},group:{command:{prefix:"!text-foreground after:content-['_>']"}},container:"scroll-py-10",closeButton:{icon:"i-heroicons-x-mark-20-solid",color:"gray",variant:"ghost",size:"xs"}},fileIcon:{name:"i-heroicons-document-text"}},i=e,s=Zt(),{navKeyFromPath:l}=Ts(),r=en(),{usingInput:o}=ct(),{isDocsSearchModalOpen:c}=tn(),d=nn({mobile:640}),a=sn(),{ui:h,attrs:v}=lt("docs.search",Re(i,"ui"),t,void 0,!0),b=d.smaller("mobile"),O=L();function E(u){var f;return u.icon?u.icon:(f=u.navigation)!=null&&f.icon?u.navigation.icon:(i.navigation&&(u.icon=l(u._path,"icon",i.navigation)),u.icon||h.value.fileIcon.name)}const A=M(()=>rt({},i.fuse,{fuseOptions:{ignoreLocation:!0,includeMatches:!0,threshold:.1,keys:[{name:"title",weight:5},{name:"label",weight:5},{name:"suffix",weight:3},"children.children.value","children.children.children.value","children.children.children.children.value","children.children.children.children.children.value"]},resultLimit:12}));function I(u,f){return u?f:f==null?void 0:f.filter(m=>!m.child)}const C=M(()=>{var f,m;let u=[];return(f=i.navigation)!=null&&f.length&&(i.navigation.some(g=>{var x;return!!((x=g.children)!=null&&x.length)})?u=(i.navigation||[]).map(g=>({key:g._path,label:g.title,commands:(i.files||[]).filter(x=>{var T;return(T=x._path)==null?void 0:T.startsWith(g._path)}).flatMap(x=>y(x,g)),filter:I})):u=[{key:"docs",commands:(i.files||[]).flatMap(g=>y(g)),filter:I}]),[((m=i.links)==null?void 0:m.length)&&{key:"links",label:"Links",commands:i.links.flatMap(g=>[g.to&&{id:s.resolve(g.to).fullPath,...g,icon:g.icon||h.value.fileIcon.name},...(g.children||[]).map(x=>({id:s.resolve(x.to).fullPath,prefix:g.label,suffix:x.description,...x,icon:x.icon||g.icon||h.value.fileIcon.name}))]).filter(Boolean)},...u,...i.groups||[],!(a!=null&&a.forced)&&!i.hideColorMode&&{key:"theme",label:"Theme",commands:[{id:"theme-light",label:"Light",icon:r.ui.icons.light,disabled:a.preference==="light",click:()=>{a.preference="light"}},{id:"theme-dark",label:"Dark",icon:r.ui.icons.dark,disabled:a.preference==="dark",click:()=>{a.preference="dark"}}]}].filter(Boolean)}),_=M(()=>c.value||!o.value);function y(u,f){var g,x,T,N,Y;const m=(g=on((f==null?void 0:f.children)||[],u))==null?void 0:g.map(({title:B})=>B).join(" > ");return[{id:u._id,label:((x=u.navigation)==null?void 0:x.title)||u.title,title:((T=u.navigation)==null?void 0:T.title)||u.title,prefix:m,to:u._path,suffix:u.description,children:R(S(((N=u==null?void 0:u.body)==null?void 0:N.children)||[])),icon:E(u)},...Object.entries(p(((Y=u==null?void 0:u.body)==null?void 0:Y.children)||[])).map(([B,{title:J,children:me}])=>{var de;if(J)return{id:`${u._path}${B}`,label:J,prefix:(m?`${m} > `:"")+`${((de=u.navigation)==null?void 0:de.title)||u.title}`,to:`${u._path}${B}`,children:R(me),icon:E(u),child:!0}})].filter(Boolean)}function $(u){return(u==null?void 0:u.map(f=>{var m,g;if(["code","code-inline","em","a","strong"].includes(f.tag))return{type:"text",value:((g=(m=f.children)==null?void 0:m.find(x=>x.type==="text"))==null?void 0:g.value)||""};if(f.type==="text")return f}).filter(Boolean))||[]}function R(u){return u.map(f=>{if(["pre","style","video"].includes(f.tag))return;let m=[...f.children||[]];return["p","h1","h2","h3","h4","h5","h6","li","td","th"].includes(f.tag)&&m.length?(m=$(m).reduce((g,x)=>(g.length&&g[g.length-1].type==="text"?g[g.length-1].value+=x.value||"":g.push({...x}),g),[]),{...f,children:m}):{...f,children:R(m)}}).filter(Boolean)}function S(u){const f=[];for(const m of u){if(["h1","h2","h3"].includes(m.tag))break;f.push(m)}return f}function p(u){var x,T,N,Y;const f={};let m="",g="";for(const B of u)["h1","h2","h3"].includes(B.tag)&&(g=((N=(T=(x=B.children)==null?void 0:x.map(J=>{var me,de;if(J.type==="text")return J.value;if(["code","code-inline","em","a","strong"].includes(J.tag))return(de=(me=J.children)==null?void 0:me.find(Rt=>Rt.type==="text"))==null?void 0:de.value}))==null?void 0:T.filter(Boolean))==null?void 0:N.join(" "))||"",g&&((Y=B.props)!=null&&Y.id)&&(m=`#${encodeURIComponent(B.props.id)}`)),f[m]?f[m].children.push(B):f[m]={children:[B],title:g};return f}function k(u){c.value=!1,u.click?u.click():u.to?u.target==="_blank"||u.to.startsWith("http")?window.open(u.to,u.target||"_blank"):s.push(u.to):u.href&&window.open(u.href,"_blank")}return Fs({meta_k:{usingInput:!0,whenever:[_],handler:()=>{c.value=!c.value}},escape:{usingInput:!0,whenever:[c],handler:()=>{c.value=!1}}}),n({commandPaletteRef:O}),(u,f)=>{const m=Cs,g=rn;return P(),U(g,Oe({modelValue:j(c),"onUpdate:modelValue":f[1]||(f[1]=x=>ln(c)?c.value=x:null),overlay:!j(b),transition:!j(b),ui:j(h)},j(v)),{default:ue(()=>[ut(m,{ref_key:"commandPaletteRef",ref:O,groups:j(C),ui:j(h).commandPalette,"close-button":j(h).commandPalette.closeButton,fuse:j(A),"onUpdate:modelValue":k,onClose:f[0]||(f[0]=x=>c.value=!1)},null,8,["groups","ui","close-button","fuse"])]),_:1},16,["modelValue","overlay","transition","ui"])}}});export{zs as default};
