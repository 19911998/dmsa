import{X as Re,r as Ee,o as Fe,E as U,aj as Pe,k as qe,ad as Ve,ae as ve,d as Me,ag as We,ah as Oe,ai as Ge,M as et,a0 as tt,aI as He,ak as Ce,b as Y,c as de,e as Ke,a9 as Je,ab as Be,n as Ie,aJ as nt,a3 as Qe,aK as at,F as Te,a7 as je,t as Ne,g as Le,f as ze,aL as Ae,l as rt,aD as it,aC as st,a8 as De,w as lt,aA as we,aB as Ue,aM as ot,aG as ut}from"./entry.pM3WKjUc.js";import{c as dt}from"./_commonjsHelpers.5-cIlDoe.js";const Ze={wrapper:"relative",base:"relative block w-full disabled:cursor-not-allowed disabled:opacity-75 focus:outline-none border-0",form:"form-input",rounded:"rounded-md",placeholder:"placeholder-gray-400 dark:placeholder-gray-500",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base"},gap:{"2xs":"gap-x-1",xs:"gap-x-1.5",sm:"gap-x-1.5",md:"gap-x-2",lg:"gap-x-2.5",xl:"gap-x-2.5"},padding:{"2xs":"px-2 py-1",xs:"px-2.5 py-1.5",sm:"px-2.5 py-1.5",md:"px-3 py-2",lg:"px-3.5 py-2.5",xl:"px-3.5 py-2.5"},leading:{padding:{"2xs":"ps-7",xs:"ps-8",sm:"ps-9",md:"ps-10",lg:"ps-11",xl:"ps-12"}},trailing:{padding:{"2xs":"pe-7",xs:"pe-8",sm:"pe-9",md:"pe-10",lg:"pe-11",xl:"pe-12"}},color:{white:{outline:"shadow-sm bg-white dark:bg-gray-900 text-gray-900 dark:text-white ring-1 ring-inset ring-gray-300 dark:ring-gray-700 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"},gray:{outline:"shadow-sm bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white ring-1 ring-inset ring-gray-300 dark:ring-gray-700 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"}},variant:{outline:"shadow-sm bg-transparent text-gray-900 dark:text-white ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 focus:ring-2 focus:ring-{color}-500 dark:focus:ring-{color}-400",none:"bg-transparent focus:ring-0 focus:shadow-none"},icon:{base:"flex-shrink-0 text-gray-400 dark:text-gray-500",color:"text-{color}-500 dark:text-{color}-400",loading:"animate-spin",size:{"2xs":"h-4 w-4",xs:"h-4 w-4",sm:"h-5 w-5",md:"h-5 w-5",lg:"h-5 w-5",xl:"h-6 w-6"},leading:{wrapper:"absolute inset-y-0 start-0 flex items-center",pointer:"pointer-events-none",padding:{"2xs":"ps-2",xs:"ps-2.5",sm:"ps-2.5",md:"ps-3",lg:"ps-3.5",xl:"ps-3.5"}},trailing:{wrapper:"absolute inset-y-0 end-0 flex items-center",pointer:"pointer-events-none",padding:{"2xs":"pe-2",xs:"pe-2.5",sm:"pe-2.5",md:"pe-3",lg:"pe-3.5",xl:"pe-3.5"}}},default:{size:"sm",color:"white",variant:"outline",loadingIcon:"i-heroicons-arrow-path-20-solid"}},ct={...Ze,form:"form-textarea",default:{size:"sm",color:"white",variant:"outline"}},ft={...Ze,form:"form-select",placeholder:"text-gray-900 dark:text-white",default:{size:"sm",color:"white",variant:"outline",loadingIcon:"i-heroicons-arrow-path-20-solid",trailingIcon:"i-heroicons-chevron-down-20-solid"}};let ht=0;function gt(){return`nuid-${ht++}`}const Xe=(t,g)=>{const z=Re("form-events",void 0),r=Re("form-group",void 0),L=Re("form-inputs",void 0),K=Ee(t==null?void 0:t.id);Fe(()=>{K.value=(t==null?void 0:t.legend)===null||t.legend?void 0:(t==null?void 0:t.id)??gt(),r&&(r.inputId.value=K.value,L&&(L.value[r.name.value]=K))});const A=Ee(!1);function b(m,w){z&&z.emit({type:m,path:w})}function d(){b("blur",r==null?void 0:r.name.value),A.value=!0}function p(){b("change",r==null?void 0:r.name.value)}const y=Pe(()=>{(A.value||r!=null&&r.eagerValidation.value)&&b("input",r==null?void 0:r.name.value)},300);return{inputId:K,name:U(()=>(t==null?void 0:t.name)??(r==null?void 0:r.name.value)),size:U(()=>{var w;const m=g.size[r==null?void 0:r.size.value]?r==null?void 0:r.size.value:null;return(t==null?void 0:t.size)??m??((w=g==null?void 0:g.default)==null?void 0:w.size)}),color:U(()=>{var m;return(m=r==null?void 0:r.error)!=null&&m.value?"red":t==null?void 0:t.color}),emitFormBlur:d,emitFormInput:y,emitFormChange:p}},me=Ve(ve.ui.strategy,ve.ui.textarea,ct),pt=Me({inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rows:{type:Number,default:3},autoresize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},resize:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(t){return Object.keys(me.size).includes(t)}},color:{type:String,default:()=>me.default.color,validator(t){return[...ve.ui.colors,...Object.keys(me.color)].includes(t)}},variant:{type:String,default:()=>me.default.variant,validator(t){return[...Object.keys(me.variant),...Object.values(me.color).flatMap(g=>Object.keys(g))].includes(t)}},textareaClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur"],setup(t,{emit:g}){const{ui:z,attrs:r}=We("textarea",Oe(t,"ui"),me,Oe(t,"class")),{emitFormBlur:L,emitFormInput:K,inputId:A,color:b,size:d,name:p}=Xe(t,me),y=Ee(Ge({},t.modelModifiers,{trim:!1,lazy:!1,number:!1})),m=Ee(null),w=()=>{var _;t.autofocus&&((_=m.value)==null||_.focus())},$=()=>{if(t.autoresize){if(!m.value)return;m.value.rows=t.rows;const _=window.getComputedStyle(m.value),G=parseInt(_.paddingTop),le=parseInt(_.paddingBottom),X=G+le,v=parseInt(_.lineHeight),{scrollHeight:n}=m.value,e=(n-X)/v;e>t.rows&&(m.value.rows=e)}},W=_=>{y.value.trim&&(_=_.trim()),y.value.number&&(_=nt(_)),g("update:modelValue",_),K()},j=_=>{$(),y.value.lazy||W(_.target.value)},P=_=>{const G=_.target.value;y.value.lazy&&W(G),y.value.trim&&(_.target.value=G.trim())},se=_=>{g("blur",_),L()};Fe(()=>{setTimeout(()=>{w()},t.autofocusDelay)}),et(()=>t.modelValue,()=>{tt($)}),Fe(()=>{setTimeout(()=>{w(),$()},100)});const _e=U(()=>{var G,le;const _=((le=(G=z.value.color)==null?void 0:G[b.value])==null?void 0:le[t.variant])||z.value.variant[t.variant];return He(Ce(z.value.base,z.value.form,z.value.rounded,z.value.placeholder,z.value.size[d.value],t.padded?z.value.padding[d.value]:"p-0",_==null?void 0:_.replaceAll("{color}",b.value),!t.resize&&"resize-none"),t.textareaClass)});return{ui:z,attrs:r,name:p,inputId:A,textarea:m,textareaClass:_e,onInput:j,onChange:P,onBlur:se}}}),mt=["id","value","name","rows","required","disabled","placeholder"];function vt(t,g,z,r,L,K){return Y(),de("div",{class:Ie(t.ui.wrapper)},[Ke("textarea",Je({id:t.inputId,ref:"textarea",value:t.modelValue,name:t.name,rows:t.rows,required:t.required,disabled:t.disabled,placeholder:t.placeholder,class:t.textareaClass},t.attrs,{onInput:g[0]||(g[0]=(...A)=>t.onInput&&t.onInput(...A)),onBlur:g[1]||(g[1]=(...A)=>t.onBlur&&t.onBlur(...A)),onChange:g[2]||(g[2]=(...A)=>t.onChange&&t.onChange(...A))}),null,16,mt),Be(t.$slots,"default")],2)}const yt=qe(pt,[["render",vt]]),ue=Ve(ve.ui.strategy,ve.ui.select,ft),bt=Me({components:{UIcon:Qe},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>ue.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>ue.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},size:{type:String,default:null,validator(t){return Object.keys(ue.size).includes(t)}},color:{type:String,default:()=>ue.default.color,validator(t){return[...ve.ui.colors,...Object.keys(ue.color)].includes(t)}},variant:{type:String,default:()=>ue.default.variant,validator(t){return[...Object.keys(ue.variant),...Object.values(ue.color).flatMap(g=>Object.keys(g))].includes(t)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:"value"},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(t,{emit:g,slots:z}){const{ui:r,attrs:L}=We("select",Oe(t,"ui"),ue,Oe(t,"class")),{size:K,rounded:A}=at({ui:r,props:t}),{emitFormChange:b,inputId:d,color:p,size:y,name:m}=Xe(t,ue),w=U(()=>K.value||y.value),$=s=>{g("update:modelValue",s.target.value)},W=s=>{b(),g("change",s)},j=s=>Ae(s,t.valueAttribute,Ae(s,t.optionAttribute)),P=s=>Ae(s,t.optionAttribute,Ae(s,t.valueAttribute)),se=s=>["string","number","boolean"].includes(typeof s)?{[t.valueAttribute]:s,[t.optionAttribute]:s}:{...s,[t.valueAttribute]:j(s),[t.optionAttribute]:P(s)},_e=U(()=>t.options.map(s=>se(s))),_=U(()=>t.placeholder?[{[t.valueAttribute]:"",[t.optionAttribute]:t.placeholder,disabled:!0},..._e.value]:_e.value),G=U(()=>{const s=se(t.modelValue),S=_.value.find(C=>C[t.valueAttribute]===s[t.valueAttribute]);return S?S[t.valueAttribute]:""}),le=U(()=>{var S,C;const s=((C=(S=r.value.color)==null?void 0:S[p.value])==null?void 0:C[t.variant])||r.value.variant[t.variant];return He(Ce(r.value.base,r.value.form,A.value,r.value.size[w.value],t.padded?r.value.padding[w.value]:"p-0",s==null?void 0:s.replaceAll("{color}",p.value),(X.value||z.leading)&&r.value.leading.padding[w.value],(v.value||z.trailing)&&r.value.trailing.padding[w.value]),t.selectClass)}),X=U(()=>t.icon&&t.leading||t.icon&&!t.trailing||t.loading&&!t.trailing||t.leadingIcon),v=U(()=>t.icon&&t.trailing||t.loading&&t.trailing||t.trailingIcon),n=U(()=>t.loading?t.loadingIcon:t.leadingIcon||t.icon),e=U(()=>t.loading&&!X.value?t.loadingIcon:t.trailingIcon||t.icon),a=U(()=>Ce(r.value.icon.leading.wrapper,r.value.icon.leading.pointer,r.value.icon.leading.padding[w.value])),i=U(()=>Ce(r.value.icon.base,p.value&&ve.ui.colors.includes(p.value)&&r.value.icon.color.replaceAll("{color}",p.value),r.value.icon.size[w.value],t.loading&&r.value.icon.loading)),o=U(()=>Ce(r.value.icon.trailing.wrapper,r.value.icon.trailing.pointer,r.value.icon.trailing.padding[w.value])),h=U(()=>Ce(r.value.icon.base,p.value&&ve.ui.colors.includes(p.value)&&r.value.icon.color.replaceAll("{color}",p.value),r.value.icon.size[w.value],t.loading&&!X.value&&r.value.icon.loading));return{ui:r,attrs:L,name:m,inputId:d,normalizedOptionsWithPlaceholder:_,normalizedValue:G,isLeading:X,isTrailing:v,selectClass:le,leadingIconName:n,leadingIconClass:i,leadingWrapperIconClass:a,trailingIconName:e,trailingIconClass:h,trailingWrapperIconClass:o,onInput:$,onChange:W}}}),_t=["id","name","value","required","disabled"],kt=["value","label"],wt=["value","selected","disabled","textContent"],Ct=["value","selected","disabled","textContent"];function It(t,g,z,r,L,K){const A=Qe;return Y(),de("div",{class:Ie(t.ui.wrapper)},[Ke("select",Je({id:t.inputId,name:t.name,value:t.modelValue,required:t.required,disabled:t.disabled||t.loading,class:t.selectClass},t.attrs,{onInput:g[0]||(g[0]=(...b)=>t.onInput&&t.onInput(...b)),onChange:g[1]||(g[1]=(...b)=>t.onChange&&t.onChange(...b))}),[(Y(!0),de(Te,null,je(t.normalizedOptionsWithPlaceholder,(b,d)=>(Y(),de(Te,null,[b.children?(Y(),de("optgroup",{key:`${b[t.valueAttribute]}-optgroup-${d}`,value:b[t.valueAttribute],label:b[t.optionAttribute]},[(Y(!0),de(Te,null,je(b.children,(p,y)=>(Y(),de("option",{key:`${p[t.valueAttribute]}-${d}-${y}`,value:p[t.valueAttribute],selected:p[t.valueAttribute]===t.normalizedValue,disabled:p.disabled,textContent:Ne(p[t.optionAttribute])},null,8,wt))),128))],8,kt)):(Y(),de("option",{key:`${b[t.valueAttribute]}-${d}`,value:b[t.valueAttribute],selected:b[t.valueAttribute]===t.normalizedValue,disabled:b.disabled,textContent:Ne(b[t.optionAttribute])},null,8,Ct))],64))),256))],16,_t),t.isLeading&&t.leadingIconName||t.$slots.leading?(Y(),de("span",{key:0,class:Ie(t.leadingWrapperIconClass)},[Be(t.$slots,"leading",{disabled:t.disabled,loading:t.loading},()=>[Le(A,{name:t.leadingIconName,class:Ie(t.leadingIconClass)},null,8,["name","class"])])],2)):ze("",!0),t.isTrailing&&t.trailingIconName||t.$slots.trailing?(Y(),de("span",{key:1,class:Ie(t.trailingWrapperIconClass)},[Be(t.$slots,"trailing",{disabled:t.disabled,loading:t.loading},()=>[Le(A,{name:t.trailingIconName,class:Ie(t.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])])],2)):ze("",!0)],2)}const Et=qe(bt,[["render",It]]);var Ye={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,g){(function(z,r){t.exports=r()})(dt,function z(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},L=!r.document&&!!r.postMessage,K=r.IS_PAPA_WORKER||!1,A={},b=0,d={parse:function(n,e){var a=(e=e||{}).dynamicTyping||!1;if(v(a)&&(e.dynamicTypingFunction=a,a={}),e.dynamicTyping=a,e.transform=!!v(e.transform)&&e.transform,e.worker&&d.WORKERS_SUPPORTED){var i=function(){if(!d.WORKERS_SUPPORTED)return!1;var h=(S=r.URL||r.webkitURL||null,C=z.toString(),d.BLOB_URL||(d.BLOB_URL=S.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",C,")();"],{type:"text/javascript"})))),s=new r.Worker(h),S,C;return s.onmessage=_e,s.id=b++,A[s.id]=s}();return i.userStep=e.step,i.userChunk=e.chunk,i.userComplete=e.complete,i.userError=e.error,e.step=v(e.step),e.chunk=v(e.chunk),e.complete=v(e.complete),e.error=v(e.error),delete e.worker,void i.postMessage({input:n,config:e,workerId:i.id})}var o=null;return d.NODE_STREAM_INPUT,typeof n=="string"?(n=function(h){return h.charCodeAt(0)===65279?h.slice(1):h}(n),o=e.download?new m(e):new $(e)):n.readable===!0&&v(n.read)&&v(n.on)?o=new W(e):(r.File&&n instanceof File||n instanceof Object)&&(o=new w(e)),o.stream(n)},unparse:function(n,e){var a=!1,i=!0,o=",",h=`\r
`,s='"',S=s+s,C=!1,u=null,F=!1;(function(){if(typeof e=="object"){if(typeof e.delimiter!="string"||d.BAD_DELIMITERS.filter(function(l){return e.delimiter.indexOf(l)!==-1}).length||(o=e.delimiter),(typeof e.quotes=="boolean"||typeof e.quotes=="function"||Array.isArray(e.quotes))&&(a=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(C=e.skipEmptyLines),typeof e.newline=="string"&&(h=e.newline),typeof e.quoteChar=="string"&&(s=e.quoteChar),typeof e.header=="boolean"&&(i=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");u=e.columns}e.escapeChar!==void 0&&(S=e.escapeChar+s),(typeof e.escapeFormulae=="boolean"||e.escapeFormulae instanceof RegExp)&&(F=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var f=new RegExp(P(s),"g");if(typeof n=="string"&&(n=JSON.parse(n)),Array.isArray(n)){if(!n.length||Array.isArray(n[0]))return re(null,n,C);if(typeof n[0]=="object")return re(u||Object.keys(n[0]),n,C)}else if(typeof n=="object")return typeof n.data=="string"&&(n.data=JSON.parse(n.data)),Array.isArray(n.data)&&(n.fields||(n.fields=n.meta&&n.meta.fields||u),n.fields||(n.fields=Array.isArray(n.data[0])?n.fields:typeof n.data[0]=="object"?Object.keys(n.data[0]):[]),Array.isArray(n.data[0])||typeof n.data[0]=="object"||(n.data=[n.data])),re(n.fields||[],n.data||[],C);throw new Error("Unable to serialize unrecognized input");function re(l,O,Q){var D="";typeof l=="string"&&(l=JSON.parse(l)),typeof O=="string"&&(O=JSON.parse(O));var H=Array.isArray(l)&&0<l.length,q=!Array.isArray(O[0]);if(H&&i){for(var V=0;V<l.length;V++)0<V&&(D+=o),D+=J(l[V],V);0<O.length&&(D+=h)}for(var c=0;c<O.length;c++){var k=H?l.length:O[c].length,R=!1,N=H?Object.keys(O[c]).length===0:O[c].length===0;if(Q&&!H&&(R=Q==="greedy"?O[c].join("").trim()==="":O[c].length===1&&O[c][0].length===0),Q==="greedy"&&H){for(var E=[],Z=0;Z<k;Z++){var B=q?l[Z]:Z;E.push(O[c][B])}R=E.join("").trim()===""}if(!R){for(var x=0;x<k;x++){0<x&&!N&&(D+=o);var ie=H&&q?l[x]:x;D+=J(O[c][ie],x)}c<O.length-1&&(!Q||0<k&&!N)&&(D+=h)}}return D}function J(l,O){if(l==null)return"";if(l.constructor===Date)return JSON.stringify(l).slice(1,25);var Q=!1;F&&typeof l=="string"&&F.test(l)&&(l="'"+l,Q=!0);var D=l.toString().replace(f,S);return(Q=Q||a===!0||typeof a=="function"&&a(l,O)||Array.isArray(a)&&a[O]||function(H,q){for(var V=0;V<q.length;V++)if(-1<H.indexOf(q[V]))return!0;return!1}(D,d.BAD_DELIMITERS)||-1<D.indexOf(o)||D.charAt(0)===" "||D.charAt(D.length-1)===" ")?s+D+s:D}}};if(d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!L&&!!r.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=se,d.ParserHandle=j,d.NetworkStreamer=m,d.FileStreamer=w,d.StringStreamer=$,d.ReadableStreamStreamer=W,r.jQuery){var p=r.jQuery;p.fn.parse=function(n){var e=n.config||{},a=[];return this.each(function(h){if(!(p(this).prop("tagName").toUpperCase()==="INPUT"&&p(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var s=0;s<this.files.length;s++)a.push({file:this.files[s],inputElem:this,instanceConfig:p.extend({},e)})}),i(),this;function i(){if(a.length!==0){var h,s,S,C,u=a[0];if(v(n.before)){var F=n.before(u.file,u.inputElem);if(typeof F=="object"){if(F.action==="abort")return h="AbortError",s=u.file,S=u.inputElem,C=F.reason,void(v(n.error)&&n.error({name:h},s,S,C));if(F.action==="skip")return void o();typeof F.config=="object"&&(u.instanceConfig=p.extend(u.instanceConfig,F.config))}else if(F==="skip")return void o()}var f=u.instanceConfig.complete;u.instanceConfig.complete=function(re){v(f)&&f(re,u.file,u.inputElem),o()},d.parse(u.file,u.instanceConfig)}else v(n.complete)&&n.complete()}function o(){a.splice(0,1),i()}}}function y(n){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var a=le(e);a.chunkSize=parseInt(a.chunkSize),e.step||e.chunk||(a.chunkSize=null),this._handle=new j(a),(this._handle.streamer=this)._config=a}).call(this,n),this.parseChunk=function(e,a){if(this.isFirstChunk&&v(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);i!==void 0&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+e;this._partialLine="";var h=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=h.meta.cursor;this._finished||(this._partialLine=o.substring(s-this._baseIndex),this._baseIndex=s),h&&h.data&&(this._rowCount+=h.data.length);var S=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(K)r.postMessage({results:h,workerId:d.WORKER_ID,finished:S});else if(v(this._config.chunk)&&!a){if(this._config.chunk(h,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);h=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(h.data),this._completeResults.errors=this._completeResults.errors.concat(h.errors),this._completeResults.meta=h.meta),this._completed||!S||!v(this._config.complete)||h&&h.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),S||h&&h.meta.paused||this._nextChunk(),h}this._halted=!0},this._sendError=function(e){v(this._config.error)?this._config.error(e):K&&this._config.error&&r.postMessage({workerId:d.WORKER_ID,error:e,finished:!1})}}function m(n){var e;(n=n||{}).chunkSize||(n.chunkSize=d.RemoteChunkSize),y.call(this,n),this._nextChunk=L?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(a){this._input=a,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),L||(e.onload=X(this._chunkLoaded,this),e.onerror=X(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!L),this._config.downloadRequestHeaders){var a=this._config.downloadRequestHeaders;for(var i in a)e.setRequestHeader(i,a[i])}if(this._config.chunkSize){var o=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+o)}try{e.send(this._config.downloadRequestBody)}catch(h){this._chunkError(h.message)}L&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(a){var i=a.getResponseHeader("Content-Range");return i===null?-1:parseInt(i.substring(i.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(a){var i=e.statusText||a;this._sendError(new Error(i))}}function w(n){var e,a;(n=n||{}).chunkSize||(n.chunkSize=d.LocalChunkSize),y.call(this,n);var i=typeof FileReader<"u";this.stream=function(o){this._input=o,a=o.slice||o.webkitSlice||o.mozSlice,i?((e=new FileReader).onload=X(this._chunkLoaded,this),e.onerror=X(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var o=this._input;if(this._config.chunkSize){var h=Math.min(this._start+this._config.chunkSize,this._input.size);o=a.call(o,this._start,h)}var s=e.readAsText(o,this._config.encoding);i||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(o){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(o.target.result)},this._chunkError=function(){this._sendError(e.error)}}function $(n){var e;y.call(this,n=n||{}),this.stream=function(a){return e=a,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var a,i=this._config.chunkSize;return i?(a=e.substring(0,i),e=e.substring(i)):(a=e,e=""),this._finished=!e,this.parseChunk(a)}}}function W(n){y.call(this,n=n||{});var e=[],a=!0,i=!1;this.pause=function(){y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(o){this._input=o,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):a=!0},this._streamData=X(function(o){try{e.push(typeof o=="string"?o:o.toString(this._config.encoding)),a&&(a=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(h){this._streamError(h)}},this),this._streamError=X(function(o){this._streamCleanUp(),this._sendError(o)},this),this._streamEnd=X(function(){this._streamCleanUp(),i=!0,this._streamData("")},this),this._streamCleanUp=X(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function j(n){var e,a,i,o=Math.pow(2,53),h=-o,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,S=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,C=this,u=0,F=0,f=!1,re=!1,J=[],l={data:[],errors:[],meta:{}};if(v(n.step)){var O=n.step;n.step=function(c){if(l=c,H())D();else{if(D(),l.data.length===0)return;u+=c.data.length,n.preview&&u>n.preview?a.abort():(l.data=l.data[0],O(l,C))}}}function Q(c){return n.skipEmptyLines==="greedy"?c.join("").trim()==="":c.length===1&&c[0].length===0}function D(){return l&&i&&(V("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),i=!1),n.skipEmptyLines&&(l.data=l.data.filter(function(c){return!Q(c)})),H()&&function(){if(!l)return;function c(R,N){v(n.transformHeader)&&(R=n.transformHeader(R,N)),J.push(R)}if(Array.isArray(l.data[0])){for(var k=0;H()&&k<l.data.length;k++)l.data[k].forEach(c);l.data.splice(0,1)}else l.data.forEach(c)}(),function(){if(!l||!n.header&&!n.dynamicTyping&&!n.transform)return l;function c(R,N){var E,Z=n.header?{}:[];for(E=0;E<R.length;E++){var B=E,x=R[E];n.header&&(B=E>=J.length?"__parsed_extra":J[E]),n.transform&&(x=n.transform(x,B)),x=q(B,x),B==="__parsed_extra"?(Z[B]=Z[B]||[],Z[B].push(x)):Z[B]=x}return n.header&&(E>J.length?V("FieldMismatch","TooManyFields","Too many fields: expected "+J.length+" fields but parsed "+E,F+N):E<J.length&&V("FieldMismatch","TooFewFields","Too few fields: expected "+J.length+" fields but parsed "+E,F+N)),Z}var k=1;return!l.data.length||Array.isArray(l.data[0])?(l.data=l.data.map(c),k=l.data.length):l.data=c(l.data,0),n.header&&l.meta&&(l.meta.fields=J),F+=k,l}()}function H(){return n.header&&J.length===0}function q(c,k){return R=c,n.dynamicTypingFunction&&n.dynamicTyping[R]===void 0&&(n.dynamicTyping[R]=n.dynamicTypingFunction(R)),(n.dynamicTyping[R]||n.dynamicTyping)===!0?k==="true"||k==="TRUE"||k!=="false"&&k!=="FALSE"&&(function(N){if(s.test(N)){var E=parseFloat(N);if(h<E&&E<o)return!0}return!1}(k)?parseFloat(k):S.test(k)?new Date(k):k===""?null:k):k;var R}function V(c,k,R,N){var E={type:c,code:k,message:R};N!==void 0&&(E.row=N),l.errors.push(E)}this.parse=function(c,k,R){var N=n.quoteChar||'"';if(n.newline||(n.newline=function(B,x){B=B.substring(0,1048576);var ie=new RegExp(P(x)+"([^]*?)"+P(x),"gm"),ee=(B=B.replace(ie,"")).split("\r"),oe=B.split(`
`),ce=1<oe.length&&oe[0].length<ee[0].length;if(ee.length===1||ce)return`
`;for(var te=0,T=0;T<ee.length;T++)ee[T][0]===`
`&&te++;return te>=ee.length/2?`\r
`:"\r"}(c,N)),i=!1,n.delimiter)v(n.delimiter)&&(n.delimiter=n.delimiter(c),l.meta.delimiter=n.delimiter);else{var E=function(B,x,ie,ee,oe){var ce,te,T,M;oe=oe||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var ye=0;ye<oe.length;ye++){var I=oe[ye],ke=0,fe=0,be=0;T=void 0;for(var he=new se({comments:ee,delimiter:I,newline:x,preview:10}).parse(B),ge=0;ge<he.data.length;ge++)if(ie&&Q(he.data[ge]))be++;else{var pe=he.data[ge].length;fe+=pe,T!==void 0?0<pe&&(ke+=Math.abs(pe-T),T=pe):T=pe}0<he.data.length&&(fe/=he.data.length-be),(te===void 0||ke<=te)&&(M===void 0||M<fe)&&1.99<fe&&(te=ke,ce=I,M=fe)}return{successful:!!(n.delimiter=ce),bestDelimiter:ce}}(c,n.newline,n.skipEmptyLines,n.comments,n.delimitersToGuess);E.successful?n.delimiter=E.bestDelimiter:(i=!0,n.delimiter=d.DefaultDelimiter),l.meta.delimiter=n.delimiter}var Z=le(n);return n.preview&&n.header&&Z.preview++,e=c,a=new se(Z),l=a.parse(e,k,R),D(),f?{meta:{paused:!0}}:l||{meta:{paused:!1}}},this.paused=function(){return f},this.pause=function(){f=!0,a.abort(),e=v(n.chunk)?"":e.substring(a.getCharIndex())},this.resume=function(){C.streamer._halted?(f=!1,C.streamer.parseChunk(e,!0)):setTimeout(C.resume,3)},this.aborted=function(){return re},this.abort=function(){re=!0,a.abort(),l.meta.aborted=!0,v(n.complete)&&n.complete(l),e=""}}function P(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function se(n){var e,a=(n=n||{}).delimiter,i=n.newline,o=n.comments,h=n.step,s=n.preview,S=n.fastMode,C=e=n.quoteChar===void 0||n.quoteChar===null?'"':n.quoteChar;if(n.escapeChar!==void 0&&(C=n.escapeChar),(typeof a!="string"||-1<d.BAD_DELIMITERS.indexOf(a))&&(a=","),o===a)throw new Error("Comment character same as delimiter");o===!0?o="#":(typeof o!="string"||-1<d.BAD_DELIMITERS.indexOf(o))&&(o=!1),i!==`
`&&i!=="\r"&&i!==`\r
`&&(i=`
`);var u=0,F=!1;this.parse=function(f,re,J){if(typeof f!="string")throw new Error("Input must be a string");var l=f.length,O=a.length,Q=i.length,D=o.length,H=v(h),q=[],V=[],c=[],k=u=0;if(!f)return ne();if(n.header&&!re){var R=f.split(i)[0].split(a),N=[],E={},Z=!1;for(var B in R){var x=R[B];v(n.transformHeader)&&(x=n.transformHeader(x,B));var ie=x,ee=E[x]||0;for(0<ee&&(Z=!0,ie=x+"_"+ee),E[x]=ee+1;N.includes(ie);)ie=ie+"_"+ee;N.push(ie)}if(Z){var oe=f.split(i);oe[0]=N.join(a),f=oe.join(i)}}if(S||S!==!1&&f.indexOf(e)===-1){for(var ce=f.split(i),te=0;te<ce.length;te++){if(c=ce[te],u+=c.length,te!==ce.length-1)u+=i.length;else if(J)return ne();if(!o||c.substring(0,D)!==o){if(H){if(q=[],be(c.split(a)),xe(),F)return ne()}else be(c.split(a));if(s&&s<=te)return q=q.slice(0,s),ne(!0)}}return ne()}for(var T=f.indexOf(a,u),M=f.indexOf(i,u),ye=new RegExp(P(C)+P(e),"g"),I=f.indexOf(e,u);;)if(f[u]!==e)if(o&&c.length===0&&f.substring(u,u+D)===o){if(M===-1)return ne();u=M+Q,M=f.indexOf(i,u),T=f.indexOf(a,u)}else if(T!==-1&&(T<M||M===-1))c.push(f.substring(u,T)),u=T+O,T=f.indexOf(a,u);else{if(M===-1)break;if(c.push(f.substring(u,M)),pe(M+Q),H&&(xe(),F))return ne();if(s&&q.length>=s)return ne(!0)}else for(I=u,u++;;){if((I=f.indexOf(e,I+1))===-1)return J||V.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:q.length,index:u}),ge();if(I===l-1)return ge(f.substring(u,I).replace(ye,e));if(e!==C||f[I+1]!==C){if(e===C||I===0||f[I-1]!==C){T!==-1&&T<I+1&&(T=f.indexOf(a,I+1)),M!==-1&&M<I+1&&(M=f.indexOf(i,I+1));var ke=he(M===-1?T:Math.min(T,M));if(f.substr(I+1+ke,O)===a){c.push(f.substring(u,I).replace(ye,e)),f[u=I+1+ke+O]!==e&&(I=f.indexOf(e,u)),T=f.indexOf(a,u),M=f.indexOf(i,u);break}var fe=he(M);if(f.substring(I+1+fe,I+1+fe+Q)===i){if(c.push(f.substring(u,I).replace(ye,e)),pe(I+1+fe+Q),T=f.indexOf(a,u),I=f.indexOf(e,u),H&&(xe(),F))return ne();if(s&&q.length>=s)return ne(!0);break}V.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:q.length,index:u}),I++}}else I++}return ge();function be(ae){q.push(ae),k=u}function he(ae){var $e=0;if(ae!==-1){var Se=f.substring(I+1,ae);Se&&Se.trim()===""&&($e=Se.length)}return $e}function ge(ae){return J||(ae===void 0&&(ae=f.substring(u)),c.push(ae),u=l,be(c),H&&xe()),ne()}function pe(ae){u=ae,be(c),c=[],M=f.indexOf(i,u)}function ne(ae){return{data:q,errors:V,meta:{delimiter:a,linebreak:i,aborted:F,truncated:!!ae,cursor:k+(re||0)}}}function xe(){h(ne()),q=[],V=[]}},this.abort=function(){F=!0},this.getCharIndex=function(){return u}}function _e(n){var e=n.data,a=A[e.workerId],i=!1;if(e.error)a.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){i=!0,_(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:G,resume:G};if(v(a.userStep)){for(var h=0;h<e.results.data.length&&(a.userStep({data:e.results.data[h],errors:e.results.errors,meta:e.results.meta},o),!i);h++);delete e.results}else v(a.userChunk)&&(a.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!i&&_(e.workerId,e.results)}function _(n,e){var a=A[n];v(a.userComplete)&&a.userComplete(e),a.terminate(),delete A[n]}function G(){throw new Error("Not implemented.")}function le(n){if(typeof n!="object"||n===null)return n;var e=Array.isArray(n)?[]:{};for(var a in n)e[a]=le(n[a]);return e}function X(n,e){return function(){n.apply(e,arguments)}}function v(n){return typeof n=="function"}return K&&(r.onmessage=function(n){var e=n.data;if(d.WORKER_ID===void 0&&e&&(d.WORKER_ID=e.workerId),typeof e.input=="string")r.postMessage({workerId:d.WORKER_ID,results:d.parse(e.input,e.config),finished:!0});else if(r.File&&e.input instanceof File||e.input instanceof Object){var a=d.parse(e.input,e.config);a&&r.postMessage({workerId:d.WORKER_ID,results:a,finished:!0})}}),(m.prototype=Object.create(y.prototype)).constructor=m,(w.prototype=Object.create(y.prototype)).constructor=w,($.prototype=Object.create($.prototype)).constructor=$,(W.prototype=Object.create(y.prototype)).constructor=W,d})})(Ye);var xt=Ye.exports;const zt=Me({__name:"convert",async setup(t){let g,z;if(rt().public.site_env!=="preview")throw it({statusCode:404,statusMessage:"Page not found",fatal:!0});const r=Ee(""),L=Ee(""),{data:K}=([g,z]=st(()=>ot("/api/meta.yml","$dg4wxn2PdN")),g=await g,z(),g),A=U(()=>{var p;return(p=xt.parse(r.value))==null?void 0:p.data}),b=U(()=>{var y;if(!((y=A.value)!=null&&y.length))return;const p=A.value[0].map(m=>m.trim());return A.value.slice(1).reduce((m,w)=>{const $=p.reduce((j,P,se)=>(P&&(j[P]=w[se].trim()),j),{}),{ID:W}=$;return delete $.ID,m.set(W,$),m},new Map)});function d(p){return K.value.replace(/^( *)([^{]+){([^:}]+):?([^}]+)?}/gm,(y,m,w,$,W)=>{let j=b.value.get(p)[$];if(j&&W)switch(W){case"Boolean":j="true";break;case"Array":j=["",...j.split(/, ?/)].join(`
`+m+"  - ");break}return m+w+(j||"")})}return(p,y)=>{const m=yt,w=Et,$=ut;return Y(),De($,{class:"mt-4"},{default:lt(()=>{var W;return[Le(m,{modelValue:we(r),"onUpdate:modelValue":y[0]||(y[0]=j=>Ue(r)?r.value=j:null),placeholder:"CSV",rows:5},null,8,["modelValue"]),(W=we(b))!=null&&W.size?(Y(),De(w,{key:0,modelValue:we(L),"onUpdate:modelValue":y[1]||(y[1]=j=>Ue(L)?L.value=j:null),options:[...we(b).keys()],placeholder:"ID",class:"mt-8"},null,8,["modelValue","options"])):ze("",!0),we(L)?(Y(),De(m,{key:1,"model-value":d(we(L)),autoresize:"",class:"mt-8"},null,8,["model-value"])):ze("",!0)]}),_:1})}}});export{zt as default};
