import{_ as M}from"./Aside.vue.epQunEqR.js";import{_ as I}from"./PageLinks.vue.NALP5hhx.js";import{_ as R,a as V}from"./PageBody.vue.ezQpMcQY.js";import{d as y,b as l,c as b,F as $,af as w,ag as p,w as o,g as r,t as U,ak as x,f as C,ab as q,aS as z,aT as F,D as h,aJ as k,aK as H,aL as J,E as s,ah as K,ax as O,v as Q,aM as v,aN as j,aU as G,s as f}from"./entry.TW0XtMN6.js";import{_ as W,a as X}from"./BlogList.vue.VfexgjrZ.js";import{_ as Y}from"./formatDate.R--iNgjV.js";import"./nuxt-img.lM2r99sT.js";const Z={key:0,class:"flex gap-x-2"},ee=y({__name:"TagList",props:{base:{},tags:{},pageTag:{}},setup(B){return(e,_)=>{const a=q,c=z,u=F;return e.tags?(l(),b("div",Z,[(l(!0),b($,null,w(e.tags,t=>(l(),p(u,{key:t,class:"z-50",color:t===e.pageTag?"primary":"gray"},{default:o(()=>[r(c,{to:t===e.pageTag?e.base:e.base+"?tag="+encodeURIComponent(t),class:"flex items-center gap-x-2"},{default:o(()=>[r(a,{name:"i-heroicons-tag"}),x(" "+U(t),1)]),_:2},1032,["to"])]),_:2},1032,["color"]))),128))])):C("",!0)}}}),le=y({__name:"index",async setup(B){let e,_;const a=h(()=>Q().query.tag),{data:c}=([e,_]=k(()=>v(a.value?"tag-"+a.value:"blog-posts",()=>(a.value?f("blog").where({tags:{$contains:a.value}}):f("blog")).without("body").sort({date:-1}).find(),{watch:[a]})),e=await e,_(),e);if(!c.value.length)throw H({statusCode:404,statusMessage:"Page not found",fatal:!0});const u=h(()=>Array.from(c.value.reduce((i,m)=>{for(const g of m.tags)i.set(g,(i.get(g)||0)+1);return i},new Map)).sort((i,m)=>m[1]-i[1])),{data:t}=([e,_]=k(()=>v("blog-overview",()=>f("_blog").findOne())),e=await e,_(),e);return J({title:t.value.title,ogTitle:t.value.title,description:t.value.description,ogDescription:t.value.description}),(i,m)=>{const g=M,T=I,D=R,L=ee,P=X,A=W,N=V,S=j,E=G;return l(),p(E,null,{default:o(()=>[r(S,null,{left:o(()=>[r(g,{links:s(t).links},null,8,["links"])]),right:o(()=>[r(g,null,{default:o(()=>[s(u).length?(l(),p(T,{key:0,links:[...s(u)].map(([n,d])=>({label:`${n} (${d})`,to:`/blog?tag=${encodeURIComponent(n)}`,icon:"i-heroicons-tag",exactQuery:!0})),title:"Schlagworte"},null,8,["links"])):C("",!0)]),_:1})]),default:o(()=>[r(D,K(s(t).hero,{links:s(a)?[{label:"Alle Blog-EintrÃ¤ge",to:"/blog",target:"_self",icon:"i-heroicons-arrow-uturn-left"}]:void 0}),O({_:2},[s(a)?{name:"headline",fn:o(()=>[x(" #"+U(s(a)),1)]),key:"0"}:void 0]),1040,["links"]),r(N,null,{default:o(()=>[r(A,{orientation:"vertical"},{default:o(()=>[(l(!0),b($,null,w(s(c),(n,d)=>(l(),p(P,{key:d,to:n._path,title:n.title,description:n.description,image:n.image,date:("formatDate"in i?i.formatDate:s(Y))(n.date),badge:n.badge,orientation:"horizontal",class:"col-span-full",ui:{description:"line-clamp-2"}},{badge:o(()=>[r(L,{base:"/blog",tags:n.tags,"page-tag":s(a),class:"mt-4"},null,8,["tags","page-tag"])]),_:2},1032,["to","title","description","image","date","badge"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}});export{le as default};
