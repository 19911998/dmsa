import{_ as S,a as q}from"./PageLinks.vue.OS_OmF8x.js";import{_ as z,a as F}from"./PageBody.vue.N-CgJJGj.js";import{d as y,b as l,c as b,F as w,a7 as $,a8 as p,w as a,t as U,j as C,g as i,f as B,aK as R,aL as V,E as h,aB as v,aC as I,aD as j,az as n,a9 as H,ao as K,v as O,aE as k,aF as Q,aM as G}from"./entry.JZ1klnAO.js";import{_ as J,a as W}from"./BlogList.vue.KsWJsj-A.js";import{q as f}from"./query.RzMymjOW.js";import{_ as X}from"./formatDate.R--iNgjV.js";import"./nuxt-img.LnVg-HlT.js";const Y={key:0,class:"flex gap-x-2"},Z=y({__name:"TagList",props:{base:{},tags:{},pageTag:{}},setup(x){return(e,c)=>{const t=R,u=V;return e.tags?(l(),b("div",Y,[(l(!0),b(w,null,$(e.tags,s=>(l(),p(u,{key:s,class:"z-50",variant:s===e.pageTag?"solid":"subtle",color:"primary"},{default:a(()=>[i(t,{to:s===e.pageTag?e.base:e.base+"?tag="+encodeURIComponent(s),class:"flex items-center gap-x-2"},{default:a(()=>[C(U(s),1)]),_:2},1032,["to"])]),_:2},1032,["variant"]))),128))])):B("",!0)}}}),ie=y({__name:"index",async setup(x){let e,c;const t=h(()=>O().query.tag),{data:u}=([e,c]=v(()=>k(t.value?"tag-"+t.value:"blog-posts",()=>(t.value?f("blog").where({tags:{$contains:t.value}}):f("blog")).without("body").sort({date:-1}).find(),{watch:[t]})),e=await e,c(),e);if(!u.value.length)throw I({statusCode:404,statusMessage:"Page not found",fatal:!0});const s=h(()=>Array.from(u.value.reduce((r,m)=>{for(const g of m.tags)r.set(g,(r.get(g)||0)+1);return r},new Map)).sort((r,m)=>m[1]-r[1])),{data:_}=([e,c]=v(()=>k("blog-overview",()=>f("_blog").findOne())),e=await e,c(),e);return j({title:_.value.title,ogTitle:_.value.title,description:_.value.description,ogDescription:_.value.description}),(r,m)=>{const g=S,D=q,L=z,P=Z,T=W,A=J,E=F,M=Q,N=G;return l(),p(N,null,{default:a(()=>[i(M,null,{left:a(()=>[i(g,{links:n(_).links},null,8,["links"])]),right:a(()=>[i(g,null,{default:a(()=>[n(s).length?(l(),p(D,{key:0,links:[...n(s)].map(([o,d])=>({label:`${o} (${d})`,to:`/blog/?tag=${encodeURIComponent(o)}`,icon:"i-heroicons-tag",exactQuery:!0})),title:"Schlagworte"},null,8,["links"])):B("",!0)]),_:1})]),default:a(()=>[i(L,H(n(_).hero,{links:n(t)?[{label:"Alle Blog-EintrÃ¤ge",to:"/blog/",target:"_self",icon:"i-heroicons-arrow-uturn-left"}]:void 0}),K({_:2},[n(t)?{name:"headline",fn:a(()=>[C(" #"+U(n(t)),1)]),key:"0"}:void 0]),1040,["links"]),i(E,null,{default:a(()=>[i(A,{orientation:"vertical"},{default:a(()=>[(l(!0),b(w,null,$(n(u),(o,d)=>(l(),p(T,{key:d,to:o._path,title:o.title,description:o.description,image:o.image,date:("formatDate"in r?r.formatDate:n(X))(o.date),badge:o.badge,orientation:"horizontal",class:"col-span-full",ui:{description:"line-clamp-2"}},{badge:a(()=>[i(P,{base:"/blog/",tags:o.tags,"page-tag":n(t),class:"mt-4"},null,8,["tags","page-tag"])]),_:2},1032,["to","title","description","image","date","badge"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}});export{ie as default};
